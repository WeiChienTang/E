/* ===== 表單區段樣式 - 縮減間距 ===== */

/* 區段標題樣式 - 縮短與水平線的距離 */
.section-title-compact {
    margin-bottom: 0.25rem !important; /* 從預設的 0.5rem 縮短到 0.25rem */
}

/* 水平線樣式 - 縮短與下方欄位的距離 */
.section-divider-compact {
    margin-top: 0 !important;
    margin-bottom: 0.5rem !important; /* 從預設的 1rem 縮短到 0.5rem */
}

/* 表單區段包裝器 */
.form-section-wrapper {
    margin-bottom: 1rem !important;
}

/* ===== Input 欄位樣式 - 縮減 Padding 和字體大小 ===== */

/* 縮減所有 input、select 和 textarea 的內邊距和字體大小 */
::deep .form-control,
::deep .form-select {
    padding: 0.25rem 0.5rem !important; /* 從預設的 0.375rem 0.75rem 縮小 */
    font-size: 1rem !important; /* 14px - 縮小字體 */
    transition: border-color 0.2s ease;
}

/* Input Hover 效果 */
::deep .form-control:hover:not(:disabled):not([readonly]),
::deep .form-select:hover:not(:disabled):not([readonly]) {
    border-color: var( --table-hover-text) !important;
    background-color: var( --table-hover-bg-striped) !important;
}

/* textarea 特別調整 */
::deep textarea.form-control {
    padding: 0.25rem 0.5rem !important;
    font-size: 1rem !important;
    transition: border-color 0.2s ease;
}

/* Textarea Hover 效果 */
::deep textarea.form-control:hover:not(:disabled):not([readonly]) {
    border-color: var( --table-hover-text) !important;
    background-color: var( --table-hover-bg-striped) !important;
}

/* Label 標籤字體 */
::deep .form-label {
    font-size: 1rem !important; /* 14px - 與 input 一致 */
    margin-bottom: 0 !important;
}

/* 區段標題字體 */
::deep .section-title-compact {
    font-size: 1rem !important; /* 16px - 區段標題稍大 */
}

/* Placeholder 字體顏色 - 更淡色 */
::deep .form-control::placeholder,
::deep .form-select::placeholder,
::deep textarea.form-control::placeholder {
    color: #b0b0b0 !important; /* 淡灰色 */
    opacity: 0.6 !important;
}

/* Firefox 專用 */
::deep .form-control::-moz-placeholder,
::deep .form-select::-moz-placeholder,
::deep textarea.form-control::-moz-placeholder {
    color: #b0b0b0 !important;
    opacity: 0.6 !important;
}

/* WebKit/Blink 專用 */
::deep .form-control::-webkit-input-placeholder,
::deep .form-select::-webkit-input-placeholder,
::deep textarea.form-control::-webkit-input-placeholder {
    color: #b0b0b0 !important;
    opacity: 0.6 !important;
}

/* Edge 專用 */
::deep .form-control::-ms-input-placeholder,
::deep .form-select::-ms-input-placeholder,
::deep textarea.form-control::-ms-input-placeholder {
    color: #b0b0b0 !important;
    opacity: 0.6 !important;
}

/* ===== Input 右側 ActionButton 樣式 ===== */

/* 包含 ActionButtons 的 input 容器 */
.input-with-action-buttons {
    position: relative;
    display: block;
}

/* 有 ActionButtons 的 input 需要預留右側空間 */
.input-with-action-buttons .has-action-buttons {
    padding-right: 45px !important; /* 為單個按鈕預留空間 (按鈕 32px + 邊距) */
}

/* 當有多個按鈕時預留更多空間 */
.input-with-action-buttons.multiple-buttons .has-action-buttons {
    padding-right: 75px !important; /* 為兩個按鈕預留空間 (每個按鈕約 32px + 間距) */
}

/* ActionButtons 容器 - 定位在 input 右側 */
.input-action-buttons-container {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    gap: 4px;
    align-items: center;
    z-index: 5; /* 確保在 input 上方 */
}

/* 單個 ActionButton 基礎樣式 */
.input-action-button {
    width: 32px;
    height: 32px;
    padding: 0 !important;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: none !important;
    border-radius: 6px;
    font-size: 1rem;
    transition: all 0.2s ease;
    cursor: pointer;
    background-color: transparent;
}

/* 圖示樣式 */
.input-action-button i {
    margin: 0 !important;
    font-size: 1rem; /* 從 0.875rem 增加到 1rem */
}

/* ===== 統一使用藍色樣式 ===== */

/* 所有 ActionButton 統一使用藍色 (Primary) */
.input-action-button {
    color: #0d6efd;
}

.input-action-button:hover:not(:disabled) {
    background-color: rgba(13, 110, 253, 0.1);
    color: #0a58ca;
}

.input-action-button:active:not(:disabled) {
    background-color: rgba(13, 110, 253, 0.2);
    transform: translateY(-50%) scale(0.95);
}

/* ===== 停用狀態 ===== */
.input-action-button:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.input-action-button:disabled:hover {
    background-color: transparent !important;
}

/* ===== AutoComplete 特殊處理 ===== */
/* 當有 loading spinner 時，調整按鈕位置 */
.input-with-action-buttons .spinner-border-sm {
    right: 80px !important; /* 為按鈕預留空間 */
}

/* ===== 響應式設計 ===== */

/* 平板尺寸 */
@media (max-width: 992px) {
    .input-action-button {
        width: 30px;
        height: 30px;
        font-size: 1rem;
    }
    
    .input-with-action-buttons .has-action-buttons {
        padding-right: 42px !important;
    }
    
    .input-with-action-buttons.multiple-buttons .has-action-buttons {
        padding-right: 70px !important;
    }
}

/* 手機尺寸 */
@media (max-width: 576px) {
    .input-action-button {
        width: 28px;
        height: 28px;
    }
    
    .input-with-action-buttons .has-action-buttons {
        padding-right: 38px !important;
    }
    
    .input-with-action-buttons.multiple-buttons .has-action-buttons {
        padding-right: 65px !important;
    }
    
    .input-action-buttons-container {
        gap: 2px;
    }
}

/* ===== Focus 狀態優化 ===== */
.input-with-action-buttons input:focus + .input-action-buttons-container .input-action-button {
    /* 當 input focus 時，稍微提高按鈕的可見度 */
    opacity: 1;
}

/* ===== 與 AutoComplete 下拉選單的 z-index 協調 ===== */
.input-with-action-buttons .list-group {
    z-index: 1000; /* 確保下拉選單在按鈕上方 */
}
