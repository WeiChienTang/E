@* 核取方塊欄位子組件 *@
@using ERPCore2.Components.Shared.UI.Form

<label class="@FormConstants.CssClasses.FormLabel" for="@Field.PropertyName" title="@Field.HelpText">
    @Field.Label
</label>
<div class="@FormConstants.CssClasses.FormCheck">
    <input type="checkbox"
           class="@FormConstants.CssClasses.FormCheckInput"
           id="@Field.PropertyName"
           name="@($"{Field.PropertyName}_{Guid.NewGuid().ToString("N").Substring(0, 8)}")"
           disabled="@(Field.IsReadOnly || Field.IsDisabled)"
           autocomplete="@FormConstants.AutoCompleteAttributes.Off"
           checked="@IsChecked"
           @onchange="HandleChange" />
</div>

@code {
    [Parameter, EditorRequired]
    public FormFieldDefinition Field { get; set; } = default!;

    [Parameter]
    public bool Value { get; set; }

    [Parameter]
    public EventCallback<bool> ValueChanged { get; set; }

    private bool IsChecked => Value;

    private async Task HandleChange(ChangeEventArgs e)
    {
        var isChecked = e.Value is bool b && b;
        await ValueChanged.InvokeAsync(isChecked);
    }
}
