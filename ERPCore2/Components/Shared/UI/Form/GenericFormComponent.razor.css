/* ===== 表單容器 ===== */
.generic-form-container {
    width: 100%;
    margin-bottom: 1rem; /* 與後續內容（如 InteractiveTableComponent）保持間距 */
}

/* ===== 新版佈局：區段水平並排 ===== */

/* 區段容器 - 使用 Flexbox 水平排列 */
.form-sections-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: flex-start;
}

/* 區段欄位 - 基礎樣式 */
.form-section-column {
    display: flex;
    flex-direction: column;
    min-width: 0; /* 防止內容撐開 */
}

/* 區段寬度類別 */
.section-col-full {
    flex: 1 1 100%;
}

.section-col-half {
    flex: 1 1 calc(50% - 0.5rem);
    max-width: calc(50% - 0.5rem);
}

.section-col-third {
    flex: 1 1 calc(33.333% - 0.67rem);
    max-width: calc(33.333% - 0.67rem);
}

/* 區段標題 */
.form-section-header {
    padding: 0.25rem 0;
    margin-bottom: 0.25rem;
    border-bottom: 1px solid #e9ecef;
}

.form-section-title {
    font-size: 1rem;
    font-weight: 600;
    color: #0d6efd;
}

/* ===== 篩選條件區段 - 特殊視覺樣式 ===== */

/* 篩選區段標題列 - 琥珀色底線與淡背景 */
.form-section-header-filter {
    background-color: rgba(255, 193, 7, 0.08);
    border-bottom-color: #ffc107;
    border-radius: 4px 4px 0 0;
    padding: 0.25rem 0.4rem;
    display: flex;
    align-items: center;
    gap: 0.3rem;
}

/* 篩選區段標題文字 - 琥珀色 */
.form-section-title-filter {
    color: #b45309;
}

/* 篩選區段圖示 */
.form-section-filter-icon {
    font-size: 0.75rem;
    color: #b45309;
    flex-shrink: 0;
}

/* 區段欄位容器 */
.form-section-fields {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
}

/* ===== 欄位行：Label 與 Input 同行 ===== */

.form-field-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Label 樣式 */
.form-field-label {
    flex: 0 0 auto;
    min-width: 80px;
    font-size: 1rem;
    font-weight: 500;
    color: #495057;
    white-space: normal;
    word-break: break-word;
}

/* Input 容器 */
.form-field-input {
    flex: 1 1 auto;
    min-width: 0;
}

/* Checkbox 特殊處理 - Label 在左邊，Checkbox 在右邊 */
.form-field-row-checkbox {
    flex-direction: row;
    justify-content: flex-start;
    align-items: center;
}

.form-field-row-checkbox .form-field-label {
    flex: 0 0 auto;
    min-width: 80px;
    margin-right: 0.5rem;
    white-space: normal;
    word-break: break-word;
}

.form-field-row-checkbox .form-field-input {
    flex: 0 0 auto;
}

/* Checkbox 內的 form-check 樣式 */
.form-field-row-checkbox .form-check {
    margin: 0;
    padding: 0;
    display: flex;
    align-items: center;
}

.form-field-row-checkbox .form-check-input {
    margin: 0;
}

/* ===== Input 欄位樣式 - 縮減 Padding 和字體大小 ===== */

/* 縮減所有 input、select 和 textarea 的內邊距和字體大小 */
::deep .form-control,
::deep .form-select {
    padding: 0.2rem 0.4rem !important; /* 進一步縮小 padding */
    font-size: 1rem !important; /* 縮小字體 */
    height: 32px !important; /* 固定較小的高度 */
    line-height: 1.4 !important; /* 調整行高 */
    transition: border-color 0.2s ease;
}

/* Input Hover 效果 */
::deep .form-control:hover:not(:disabled):not([readonly]),
::deep .form-select:hover:not(:disabled):not([readonly]) {
    border-color: var( --table-hover-text) !important;
    background-color: var( --table-hover-bg-striped) !important;
}

/* textarea 特別調整 */
::deep textarea.form-control {
    padding: 0.2rem 0.4rem !important;
    font-size: 1rem !important;
    line-height: 1.4 !important;
    min-height: 60px !important; /* 設定最小高度避免太小 */
    transition: border-color 0.2s ease;
}

/* Textarea Hover 效果 */
::deep textarea.form-control:hover:not(:disabled):not([readonly]) {
    border-color: var( --table-hover-text) !important;
    background-color: var( --table-hover-bg-striped) !important;
}

/* ===== 隱藏數字輸入欄位的上下拉桿 (spinner) ===== */

/* Chrome, Safari, Edge, Opera */
::deep input[type="number"]::-webkit-outer-spin-button,
::deep input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none !important;
    margin: 0 !important;
}

/* Firefox */
::deep input[type="number"] {
    -moz-appearance: textfield !important;
    appearance: textfield !important;
}

/* Placeholder 字體顏色 - 更淡色 */
::deep .form-control::placeholder,
::deep .form-select::placeholder,
::deep textarea.form-control::placeholder {
    color: #b0b0b0 !important; /* 淡灰色 */
    opacity: 0.6 !important;
}

/* Firefox 專用 */
::deep .form-control::-moz-placeholder,
::deep .form-select::-moz-placeholder,
::deep textarea.form-control::-moz-placeholder {
    color: #b0b0b0 !important;
    opacity: 0.6 !important;
}

/* WebKit/Blink 專用 */
::deep .form-control::-webkit-input-placeholder,
::deep .form-select::-webkit-input-placeholder,
::deep textarea.form-control::-webkit-input-placeholder {
    color: #b0b0b0 !important;
    opacity: 0.6 !important;
}

/* Edge 專用 */
::deep .form-control::-ms-input-placeholder,
::deep .form-select::-ms-input-placeholder,
::deep textarea.form-control::-ms-input-placeholder {
    color: #b0b0b0 !important;
    opacity: 0.6 !important;
}

/* ===== Input 右側 ActionButton 樣式 ===== */

/* 包含 ActionButtons 的 input 容器 */
.input-with-action-buttons {
    position: relative;
    display: block;
}

/* 有 ActionButtons 的 input 需要預留右側空間 */
.input-with-action-buttons .has-action-buttons {
    padding-right: 45px !important; /* 為單個按鈕預留空間 (按鈕 32px + 邊距) */
}

/* 當有多個按鈕時預留更多空間 */
.input-with-action-buttons.multiple-buttons .has-action-buttons {
    padding-right: 75px !important; /* 為兩個按鈕預留空間 (每個按鈕約 32px + 間距) */
}

/* ActionButtons 容器 - 定位在 input 右側 */
.input-action-buttons-container {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    gap: 4px;
    align-items: center;
    z-index: 5; /* 確保在 input 上方 */
}

/* 單個 ActionButton 基礎樣式 */
.input-action-button {
    width: 32px;
    height: 32px;
    padding: 0 !important;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: none !important;
    border-radius: 6px;
    font-size: 1rem;
    transition: all 0.2s ease;
    cursor: pointer;
    background-color: transparent;
}

/* 圖示樣式 */
.input-action-button i {
    margin: 0 !important;
    font-size: 1rem; /* 從 0.875rem 增加到 1rem */
}

/* ===== 統一使用藍色樣式 ===== */

/* 所有 ActionButton 統一使用藍色 (Primary) */
.input-action-button {
    color: #0d6efd;
}

.input-action-button:hover:not(:disabled) {
    background-color: rgba(13, 110, 253, 0.1);
    color: #0a58ca;
}

.input-action-button:active:not(:disabled) {
    background-color: rgba(13, 110, 253, 0.2);
    transform: translateY(-50%) scale(0.95);
}

/* ===== 停用狀態 ===== */
.input-action-button:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.input-action-button:disabled:hover {
    background-color: transparent !important;
}

/* ===== AutoComplete 特殊處理 ===== */
/* 當有 loading spinner 時，調整按鈕位置 */
.input-with-action-buttons .spinner-border-sm {
    right: 80px !important; /* 為按鈕預留空間 */
}

/* ===== 響應式設計 ===== */

/* 平板尺寸 */
@media (max-width: 992px) {
    .input-action-button {
        width: 30px;
        height: 30px;
        font-size: 1rem;
    }
    
    .input-with-action-buttons .has-action-buttons {
        padding-right: 42px !important;
    }
    
    .input-with-action-buttons.multiple-buttons .has-action-buttons {
        padding-right: 70px !important;
    }
}

/* 手機尺寸 */
@media (max-width: 576px) {
    /* 手機版區段垂直堆疊 */
    .form-sections-container {
        flex-direction: column;
    }
    
    .section-col-half,
    .section-col-third {
        flex: 1 1 100% !important;
        max-width: 100% !important;
        width: 100% !important;
    }
    
    /* 手機版欄位 Label 與 Input 保持同行 */
    .form-field-row {
        flex-direction: row;
        align-items: center;
        gap: 0.5rem;
        width: 100%;
    }
    
    /* 手機版 Label 樣式 - 自適應寬度 */
    .form-field-label {
        flex: 0 0 auto;
        min-width: 70px;
        white-space: normal;
        word-break: break-word;
    }
    
    /* 手機版 Input 容器佔滿剩餘寬度 */
    .form-field-input {
        flex: 1 1 auto !important;
        min-width: 0;
    }
    
    /* 手機版 Input 佔滿寬度並增加觸控區域 */
    .form-field-input .form-control,
    .form-field-input .form-select,
    .form-field-input input,
    .form-field-input select,
    .form-field-input textarea {
        width: 100% !important;
        height: 44px !important; /* Apple 建議的最小觸控區域 */
        font-size: 16px !important; /* 防止 iOS 自動縮放 */
        padding: 0.5rem 0.75rem !important;
    }
    
    /* Checkbox 在手機版保持同行 - Label 在左、Checkbox 在右 */
    .form-field-row-checkbox {
        flex-direction: row;
        justify-content: flex-start;
    }
    
    .form-field-row-checkbox .form-field-label {
        flex: 0 0 auto;
        min-width: 70px;
        max-width: 100px;
    }
    
    /* 手機版 ActionButton */
    .input-action-button {
        width: 36px;
        height: 36px;
    }
    
    .input-with-action-buttons .has-action-buttons {
        padding-right: 46px !important;
    }
    
    .input-with-action-buttons.multiple-buttons .has-action-buttons {
        padding-right: 80px !important;
    }
    
    .input-action-buttons-container {
        gap: 2px;
    }
    
    /* 手機版區段間距 */
    .form-section-column {
        margin-bottom: 0.5rem;
        width: 100% !important;
    }
    
    /* 確保區段欄位容器也全寬 */
    .form-section-fields {
        width: 100%;
    }
}

/* ===== Focus 狀態優化 ===== */
.input-with-action-buttons input:focus + .input-action-buttons-container .input-action-button {
    /* 當 input focus 時，稍微提高按鈕的可見度 */
    opacity: 1;
}

/* ===== 與 AutoComplete 下拉選單的 z-index 協調 ===== */
.input-with-action-buttons .list-group {
    z-index: 1000; /* 確保下拉選單在按鈕上方 */
}

/* ===== Tab 佈局模式 - 按鈕樣式 ===== */

/* Tab 容器 - 緊貼上方功能按鈕 */
.form-tab-container {
    width: 100%;
}

/* Tab 按鈕群組容器 */
.form-tab-btn-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.35rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #e9ecef;
}

/* Tab 按鈕基礎樣式 */
.form-tab-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    padding: 0.25rem 0.75rem;
    font-size: 1rem;
    font-weight: 500;
    color: #6c757d;
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: all 0.15s ease;
    white-space: nowrap;
}

.form-tab-btn:hover {
    color: #0d6efd;
    background-color: #e7f1ff;
    border-color: #b6d4fe;
}

/* 作用中的 Tab 按鈕 */
.form-tab-btn.active {
    color: #fff;
    background-color: #0d6efd;
    border-color: #0d6efd;
    font-weight: 600;
}

.form-tab-btn.active:hover {
    background-color: #0b5ed7;
    border-color: #0a58ca;
    color: #fff;
}

/* Tab 按鈕圖示 */
.form-tab-btn i {
    font-size: 1rem;
}

/* Tab 內容區域 */
.form-tab-content {
    padding: 0.5rem 0 0 0;
}

.form-tab-content .tab-pane {
    width: 100%;
}

/* 手機版 Tab 響應式 */
@media (max-width: 576px) {
    .form-tab-btn-group {
        gap: 0.25rem;
    }

    .form-tab-btn {
        padding: 0.3rem 0.6rem;
        font-size: 0.9rem;
    }

    .form-tab-content {
        padding: 0.35rem 0 0 0;
    }
}
