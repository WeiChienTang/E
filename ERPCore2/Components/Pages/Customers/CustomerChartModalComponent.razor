@using ERPCore2.Models.Charts
@using ERPCore2.Services.Customers
@inject ICustomerChartService ChartService
@inject IStringLocalizer<SharedResource> L

<GenericChartModalComponent IsVisible="@IsVisible"
                            IsVisibleChanged="@IsVisibleChanged"
                            Category="@ChartCategory.Customer"
                            Title="@L["Customer.ChartTitle"]"
                            Icon="bi bi-bar-chart-fill"
                            OnDataLoading="@LoadSummaryAsync">
</GenericChartModalComponent>

@code {
    [Parameter] public bool IsVisible { get; set; }
    [Parameter] public EventCallback<bool> IsVisibleChanged { get; set; }

    private CustomerChartSummary? _summary;

    private async Task LoadSummaryAsync()
    {
        _summary = await ChartService.GetSummaryAsync();
        StateHasChanged();
    }
}
