@page "/sharedcomponentsdemo/loading"
@using static ERPCore2.Components.Shared.Loading.LoadingComponent
@rendermode InteractiveServer

<PageTitle>Loading å…ƒä»¶å±•ç¤º</PageTitle>

<div class="container-fluid">
    <h1 class="h3 mb-4">Loading å…ƒä»¶å±•ç¤º</h1>
    
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">LoadingComponent å…ƒä»¶ç¯„ä¾‹</h5>
                </div>
                <div class="card-body">
                    <p class="text-muted mb-4">
                        LoadingComponent å…ƒä»¶æä¾›çµ±ä¸€çš„è¼‰å…¥æŒ‡ç¤ºå™¨ï¼Œæ”¯æ´ä¸åŒå°ºå¯¸ã€æ–‡å­—é¡¯ç¤ºå’Œæ¨£å¼è‡ªè¨‚ã€‚
                    </p>
                    
                    <h6>ç¯„ä¾‹ 1: åŸºæœ¬è¼‰å…¥æŒ‡ç¤ºå™¨</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row">
                            <div class="col-md-6">
                                <label class="form-label">é è¨­è¼‰å…¥ä¸­:</label>
                                <LoadingComponent IsLoading="true" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ç„¡è¼‰å…¥ç‹€æ…‹:</label>
                                <LoadingComponent IsLoading="false" />
                                <p class="text-muted small mt-2">ç•¶ IsLoading = false æ™‚ï¼Œä¸æœƒé¡¯ç¤ºä»»ä½•å…§å®¹</p>
                            </div>
                        </div>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 2: ä¸åŒå°ºå¯¸çš„è¼‰å…¥æŒ‡ç¤ºå™¨</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row">
                            <div class="col-md-4">
                                <label class="form-label">å°å°ºå¯¸:</label>
                                <LoadingComponent IsLoading="true" Size="LoadingSize.Small" />
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">ä¸€èˆ¬å°ºå¯¸:</label>
                                <LoadingComponent IsLoading="true" Size="LoadingSize.Normal" />
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">å¤§å°ºå¯¸:</label>
                                <LoadingComponent IsLoading="true" Size="LoadingSize.Large" />
                            </div>
                        </div>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 3: å¸¶æ–‡å­—çš„è¼‰å…¥æŒ‡ç¤ºå™¨</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row">
                            <div class="col-md-6">
                                <label class="form-label">é è¨­è¼‰å…¥æ–‡å­—:</label>
                                <LoadingComponent IsLoading="true" ShowText="true" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">è‡ªè¨‚è¼‰å…¥æ–‡å­—:</label>
                                <LoadingComponent IsLoading="true" ShowText="true" LoadingText="æ­£åœ¨è™•ç†è³‡æ–™..." />
                            </div>
                        </div>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 4: ä¸åŒå°é½Šæ–¹å¼</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row">
                            <div class="col-md-6">
                                <label class="form-label">å±…ä¸­å°é½Š (é è¨­):</label>
                                <div class="border p-2 bg-white">
                                    <LoadingComponent IsLoading="true" ShowText="true" LoadingText="å±…ä¸­è¼‰å…¥ä¸­..." />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">éå±…ä¸­å°é½Š:</label>
                                <div class="border p-2 bg-white">
                                    <LoadingComponent IsLoading="true" ShowText="true" LoadingText="å·¦å°é½Šè¼‰å…¥ä¸­..." IsCentered="false" />
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 5: äº’å‹•å¼è¼‰å…¥æ§åˆ¶</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="d-flex gap-2 mb-3">
                                    <GenericButtonComponent Text="@(demoLoading ? "åœæ­¢è¼‰å…¥" : "é–‹å§‹è¼‰å…¥")" 
                                                   Variant="@(demoLoading ? ButtonVariant.Danger : ButtonVariant.Primary)"
                                                   OnClick="ToggleDemoLoading" />
                                </div>
                                
                                <div class="border p-3 bg-white" style="min-height: 100px;">
                                    @if (demoLoading)
                                    {
                                        <LoadingComponent IsLoading="true" ShowText="true" LoadingText="æ¨¡æ“¬è¼‰å…¥ä¸­..." />
                                    }
                                    else
                                    {
                                        <div class="text-center py-4">
                                            <p class="text-success mb-0">âœ“ è¼‰å…¥å®Œæˆï¼</p>
                                        </div>
                                    }
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="d-flex gap-2 mb-3">
                                    <GenericButtonComponent Text="æ¨¡æ“¬æ•¸æ“šè¼‰å…¥" 
                                                   Variant="ButtonVariant.Success"
                                                   OnClick="SimulateDataLoading" 
                                                   IsDisabled="@simulateLoading" />
                                </div>
                                
                                <div class="border p-3 bg-white" style="min-height: 100px;">
                                    @if (simulateLoading)
                                    {
                                        <LoadingComponent IsLoading="true" ShowText="true" LoadingText="æ­£åœ¨è¼‰å…¥æ•¸æ“š..." />
                                    }
                                    else
                                    {
                                        <div>
                                            <h6>æ¨¡æ“¬æ•¸æ“šåˆ—è¡¨:</h6>
                                            <ul class="list-unstyled">
                                                @foreach (var item in sampleData)
                                                {
                                                    <li class="mb-1">
                                                        <i class="bi bi-check-circle-fill text-success me-2"></i>
                                                        @item
                                                    </li>
                                                }
                                            </ul>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 6: ä¸åŒæ¨£å¼çµ„åˆ</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row">
                            <div class="col-md-4">
                                <label class="form-label">å°å°ºå¯¸ + æ–‡å­—:</label>
                                <div class="border p-2 bg-white">
                                    <LoadingComponent 
                                        IsLoading="true" 
                                        Size="LoadingSize.Small" 
                                        ShowText="true" 
                                        LoadingText="è™•ç†ä¸­..." />
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">å¤§å°ºå¯¸ + è‡ªè¨‚æ–‡å­—:</label>
                                <div class="border p-2 bg-white">
                                    <LoadingComponent 
                                        IsLoading="true" 
                                        Size="LoadingSize.Large" 
                                        ShowText="true" 
                                        LoadingText="æ­£åœ¨ä¸Šå‚³æª”æ¡ˆ..." />
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">è‡ªè¨‚ CSS æ¨£å¼:</label>
                                <div class="border p-2 bg-white">
                                    <LoadingComponent 
                                        IsLoading="true" 
                                        ShowText="true" 
                                        LoadingText="ç‰¹æ®Šæ¨£å¼è¼‰å…¥..."
                                        CssClass="border-primary rounded p-2" />
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 7: å¡ç‰‡å…§å®¹è¼‰å…¥ç‹€æ…‹</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="card-title mb-0">ç”¨æˆ¶è³‡æ–™</h6>
                                    </div>
                                    <div class="card-body">
                                        @if (userDataLoading)
                                        {
                                            <LoadingComponent IsLoading="true" ShowText="true" LoadingText="è¼‰å…¥ç”¨æˆ¶è³‡æ–™..." />
                                        }
                                        else
                                        {
                                            <p><strong>å§“å:</strong> å¼µä¸‰</p>
                                            <p><strong>é›»å­éƒµä»¶:</strong> zhang.san@example.com</p>
                                            <p><strong>é›»è©±:</strong> 0912-345-678</p>
                                        }
                                    </div>
                                    <div class="card-footer">
                                        <GenericButtonComponent Text="@(userDataLoading ? "è¼‰å…¥ä¸­..." : "é‡æ–°è¼‰å…¥")" 
                                                       Variant="ButtonVariant.Primary"
                                                       OnClick="LoadUserData" 
                                                       IsDisabled="@userDataLoading" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="card-title mb-0">éŠ·å”®å ±è¡¨</h6>
                                    </div>
                                    <div class="card-body">
                                        @if (reportLoading)
                                        {
                                            <LoadingComponent IsLoading="true" ShowText="true" LoadingText="ç”¢ç”Ÿå ±è¡¨ä¸­..." Size="LoadingSize.Small" />
                                        }
                                        else
                                        {
                                            <canvas id="chartCanvas" style="height: 100px; background: #f8f9fa;" class="w-100">
                                                <div class="text-center py-4 text-muted">ğŸ“Š æ¨¡æ“¬åœ–è¡¨å€åŸŸ</div>
                                            </canvas>
                                        }
                                    </div>
                                    <div class="card-footer">
                                        <GenericButtonComponent Text="@(reportLoading ? "ç”¢ç”Ÿä¸­..." : "ç”¢ç”Ÿå ±è¡¨")" 
                                                       Variant="ButtonVariant.Success"
                                                       OnClick="GenerateReport" 
                                                       IsDisabled="@reportLoading" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private bool demoLoading = false;
    private bool simulateLoading = false;
    private bool userDataLoading = false;
    private bool reportLoading = false;
    
    private List<string> sampleData = new();
    
    protected override void OnInitialized()
    {
        // åˆå§‹åŒ–ç¯„ä¾‹æ•¸æ“š
        sampleData = new List<string>
        {
            "å®¢æˆ¶è³‡æ–™ - 100ç­†",
            "ç”¢å“è³‡æ–™ - 250ç­†", 
            "è¨‚å–®è³‡æ–™ - 75ç­†",
            "åº«å­˜è³‡æ–™ - 180ç­†"
        };
    }
    
    private void ToggleDemoLoading()
    {
        demoLoading = !demoLoading;
        StateHasChanged();
    }
    
    private async Task SimulateDataLoading()
    {
        simulateLoading = true;
        StateHasChanged();
        
        // æ¨¡æ“¬è¼‰å…¥æ™‚é–“
        await Task.Delay(2000);
        
        simulateLoading = false;
        StateHasChanged();
    }
    
    private async Task LoadUserData()
    {
        userDataLoading = true;
        StateHasChanged();
        
        // æ¨¡æ“¬APIå‘¼å«
        await Task.Delay(1500);
        
        userDataLoading = false;
        StateHasChanged();
    }
    
    private async Task GenerateReport()
    {
        reportLoading = true;
        StateHasChanged();
        
        // æ¨¡æ“¬å ±è¡¨ç”¢ç”Ÿ
        await Task.Delay(3000);
        
        reportLoading = false;
        StateHasChanged();
    }
}
