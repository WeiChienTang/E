@page "/sharedcomponentsdemo/details"
@using ERPCore2.Components.Shared.Details
@using ERPCore2.Components.Shared.Badges
@using static ERPCore2.Components.Shared.Badges.StatusBadgeComponent
@rendermode InteractiveServer

<PageTitle>Details å…ƒä»¶å±•ç¤º</PageTitle>

<div class="container-fluid">
    <h1 class="h3 mb-4">Details å…ƒä»¶å±•ç¤º</h1>
    
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Details å…ƒä»¶ç¯„ä¾‹</h5>
                </div>
                <div class="card-body">
                    <p class="text-muted mb-4">
                        Details å…ƒä»¶ç”¨æ–¼çµæ§‹åŒ–é¡¯ç¤ºè©³ç´°è³‡è¨Šï¼ŒåŒ…å« DetailSectionComponent å’Œ DetailItemComponentï¼Œ
                        æä¾›æ¸…æ™°çš„è³‡æ–™å‘ˆç¾å’Œçµ„ç¹”æ–¹å¼ã€‚
                    </p>
                    
                    <h6>ç¯„ä¾‹ 1: åŸºæœ¬å®¢æˆ¶è©³ç´°è³‡æ–™</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="åŸºæœ¬è³‡è¨Š" IconClass="bi bi-person-circle">
                            <div class="col-md-6">
                                <DetailItemComponent Label="å®¢æˆ¶ç·¨è™Ÿ" Value="@sampleCustomer.Code" IconClass="bi bi-hash" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="å®¢æˆ¶åç¨±" Value="@sampleCustomer.Name" IconClass="bi bi-building" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="çµ±ä¸€ç·¨è™Ÿ" Value="@sampleCustomer.TaxId" IconClass="bi bi-credit-card-2-front" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="å®¢æˆ¶é¡å‹" Value="@sampleCustomer.Type" IconClass="bi bi-tags" />
                            </div>
                        </DetailSectionComponent>
                        
                        <DetailSectionComponent Title="è¯çµ¡è³‡è¨Š" IconClass="bi bi-telephone">
                            <div class="col-md-6">
                                <DetailItemComponent Label="é›»è©±" Value="@sampleCustomer.Phone" IconClass="bi bi-phone" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="é›»å­éƒµä»¶" Value="@sampleCustomer.Email" IconClass="bi bi-envelope" />
                            </div>
                            <div class="col-md-12">
                                <DetailItemComponent Label="åœ°å€" Value="@sampleCustomer.Address" IconClass="bi bi-geo-alt" />
                            </div>
                        </DetailSectionComponent>
                        
                        <DetailSectionComponent Title="ç‹€æ…‹è³‡è¨Š" IconClass="bi bi-info-circle" ShowDivider="false">
                            <div class="col-md-4">
                                <DetailItemComponent Label="ç›®å‰ç‹€æ…‹" IconClass="bi bi-circle-fill">
                                    <StatusBadgeComponent Status="@sampleCustomer.Status" IconClass="@GetStatusIcon(sampleCustomer.Status)" />
                                </DetailItemComponent>
                            </div>
                            <div class="col-md-4">
                                <DetailItemComponent Label="VIP ç­‰ç´š" IconClass="bi bi-star">
                                    @if (sampleCustomer.IsVip)
                                    {
                                        <StatusBadgeComponent Status="EntityStatus.Active" 
                                                            CustomText="@sampleCustomer.VipLevel" 
                                                            IconClass="bi bi-gem" />
                                    }
                                    else
                                    {
                                        <span class="text-muted">ä¸€èˆ¬å®¢æˆ¶</span>
                                    }
                                </DetailItemComponent>
                            </div>
                            <div class="col-md-4">
                                <DetailItemComponent Label="å»ºç«‹æ—¥æœŸ" Value="@sampleCustomer.CreatedDate.ToString("yyyy/MM/dd")" IconClass="bi bi-calendar" />
                            </div>
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 2: ç©ºå€¼å’Œé è¨­æ–‡å­—è™•ç†</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="ç©ºå€¼å±•ç¤º" IconClass="bi bi-question-circle">
                            <div class="col-md-4">
                                <DetailItemComponent Label="ç©ºå€¼ (é è¨­)" Value="@emptyValue" />
                            </div>
                            <div class="col-md-4">
                                <DetailItemComponent Label="ç©ºå€¼ (è‡ªè¨‚)" Value="@emptyValue" EmptyText="ç„¡è³‡æ–™" />
                            </div>
                            <div class="col-md-4">
                                <DetailItemComponent Label="ç©ºå€¼ (ç‰¹æ®Š)" Value="@emptyValue" EmptyText="ğŸš« æœªè¨­å®š" />
                            </div>
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 3: è‡ªè¨‚å…§å®¹å±•ç¤º</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="è±å¯Œå…§å®¹å±•ç¤º" IconClass="bi bi-palette">
                            <div class="col-md-6">
                                <DetailItemComponent Label="ç”¢å“æ¸…å–®" IconClass="bi bi-list-ul">
                                    <ul class="mb-0">
                                        <li>æ°´æ³¥ç£šå¡Š <span class="badge bg-success">ç†±éŠ·</span></li>
                                        <li>ç´…ç£šææ–™ <span class="badge bg-warning text-dark">æ™®é€š</span></li>
                                        <li>ç‰¹æ®Šç£šæ <span class="badge bg-info">æ–°å“</span></li>
                                    </ul>
                                </DetailItemComponent>
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="å¿«é€Ÿæ“ä½œ" IconClass="bi bi-tools">
                                    <div class="btn-group btn-group-sm" role="group">
                                        <button type="button" class="btn btn-outline-primary" @onclick="@(() => ShowMessage("ç·¨è¼¯å®¢æˆ¶"))">
                                            <i class="bi bi-pencil"></i> ç·¨è¼¯
                                        </button>
                                        <button type="button" class="btn btn-outline-success" @onclick="@(() => ShowMessage("è¯çµ¡å®¢æˆ¶"))">
                                            <i class="bi bi-telephone"></i> è¯çµ¡
                                        </button>
                                        <button type="button" class="btn btn-outline-info" @onclick="@(() => ShowMessage("æŸ¥çœ‹è¨‚å–®"))">
                                            <i class="bi bi-receipt"></i> è¨‚å–®
                                        </button>
                                    </div>
                                </DetailItemComponent>
                            </div>
                            <div class="col-md-12">
                                <DetailItemComponent Label="äº¤æ˜“çµ±è¨ˆ" IconClass="bi bi-graph-up">
                                    <div class="row text-center">
                                        <div class="col-3">
                                            <div class="border rounded p-2">
                                                <div class="h5 text-primary mb-0">15</div>
                                                <small class="text-muted">ç¸½è¨‚å–®</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="border rounded p-2">
                                                <div class="h5 text-success mb-0">$125,600</div>
                                                <small class="text-muted">ç¸½é‡‘é¡</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="border rounded p-2">
                                                <div class="h5 text-warning mb-0">3</div>
                                                <small class="text-muted">å¾…ä»˜æ¬¾</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="border rounded p-2">
                                                <div class="h5 text-info mb-0">98%</div>
                                                <small class="text-muted">æ»¿æ„åº¦</small>
                                            </div>
                                        </div>
                                    </div>
                                </DetailItemComponent>
                            </div>
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 4: æ¨£å¼è‡ªè¨‚</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="è‡ªè¨‚æ¨£å¼å±•ç¤º" IconClass="bi bi-brush" TitleClass="text-success">
                            <div class="col-md-6">
                                <DetailItemComponent Label="é‡è¦è³‡è¨Š" 
                                                   Value="é«˜å„ªå…ˆç´šå®¢æˆ¶" 
                                                   IconClass="bi bi-exclamation-triangle-fill text-warning" 
                                                   LabelClass="text-danger fw-bold" 
                                                   ValueClass="text-danger fw-bold" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="æ¬¡è¦è³‡è¨Š" 
                                                   Value="ä¸€èˆ¬å‚™è¨»è³‡è¨Š" 
                                                   IconClass="bi bi-info-circle text-muted" 
                                                   LabelClass="text-muted" 
                                                   ValueClass="text-muted small" />
                            </div>
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 5: å¤šå±¤æ¬¡è³‡æ–™çµæ§‹</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="è¨‚å–®æ­·å²" IconClass="bi bi-clock-history">
                            @foreach (var order in sampleOrders)
                            {
                                <div class="col-12 mb-3">
                                    <div class="card">
                                        <div class="card-header py-2">
                                            <h6 class="mb-0">è¨‚å–® #@order.OrderNumber</h6>
                                        </div>
                                        <div class="card-body py-2">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <DetailItemComponent Label="è¨‚å–®æ—¥æœŸ" Value="@order.OrderDate.ToString("yyyy/MM/dd")" />
                                                </div>
                                                <div class="col-md-3">
                                                    <DetailItemComponent Label="è¨‚å–®é‡‘é¡" Value="@order.Amount.ToString("C")" />
                                                </div>
                                                <div class="col-md-3">
                                                    <DetailItemComponent Label="è¨‚å–®ç‹€æ…‹">
                                                        <StatusBadgeComponent Status="@order.Status" 
                                                                            CustomText="@order.StatusText" 
                                                                            IconClass="@GetOrderStatusIcon(order.Status)" 
                                                                            Size="BadgeSize.Small" />
                                                    </DetailItemComponent>
                                                </div>
                                                <div class="col-md-3">
                                                    <DetailItemComponent Label="ç”¢å“æ•¸é‡" Value="@order.ItemCount.ToString()" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ç¯„ä¾‹ 6: éŸ¿æ‡‰å¼ä½ˆå±€</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="éŸ¿æ‡‰å¼å±•ç¤º" IconClass="bi bi-phone" ShowDivider="false">
                            <div class="col-lg-3 col-md-6">
                                <DetailItemComponent Label="å¤§è¢å¹• 1/4" Value="æ¡Œé¢é¡¯ç¤º" IconClass="bi bi-display" />
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <DetailItemComponent Label="å¹³æ¿ 1/2" Value="å¹³æ¿é¡¯ç¤º" IconClass="bi bi-tablet" />
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <DetailItemComponent Label="æ‰‹æ©Ÿå…¨å¯¬" Value="æ‰‹æ©Ÿé¡¯ç¤º" IconClass="bi bi-phone" />
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <DetailItemComponent Label="å½ˆæ€§ä½ˆå±€" Value="è‡ªé©æ‡‰" IconClass="bi bi-arrows-expand" />
                            </div>
                        </DetailSectionComponent>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    @if (!string.IsNullOrEmpty(actionMessage))
    {
        <div class="alert alert-info alert-dismissible fade show mt-3" role="alert">
            <i class="bi bi-info-circle me-2"></i>
            @actionMessage
            <button type="button" class="btn-close" @onclick="@(() => actionMessage = string.Empty)"></button>
        </div>
    }
</div>

@code {
    private string actionMessage = string.Empty;
    private string? emptyValue = null;
    
    // ç¯„ä¾‹å®¢æˆ¶è³‡æ–™
    private SampleCustomer sampleCustomer = new()
    {
        Code = "C001",
        Name = "å°åŒ—å»ºææœ‰é™å…¬å¸",
        TaxId = "12345678",
        Type = "ä¼æ¥­å®¢æˆ¶",
        Phone = "(02) 2123-4567",
        Email = "info@taipei-building.com",
        Address = "å°åŒ—å¸‚ä¿¡ç¾©å€ä¿¡ç¾©è·¯äº”æ®µ7è™Ÿ",
        Status = EntityStatus.Active,
        IsVip = true,
        VipLevel = "é‡‘ç‰Œ",
        CreatedDate = new DateTime(2023, 3, 15)
    };
    
    // ç¯„ä¾‹è¨‚å–®è³‡æ–™
    private List<SampleOrder> sampleOrders = new()
    {
        new SampleOrder 
        { 
            OrderNumber = "ORD-2024-001", 
            OrderDate = new DateTime(2024, 11, 15), 
            Amount = 45600, 
            Status = EntityStatus.Active, 
            StatusText = "é€²è¡Œä¸­", 
            ItemCount = 8 
        },
        new SampleOrder 
        { 
            OrderNumber = "ORD-2024-002", 
            OrderDate = new DateTime(2024, 10, 28), 
            Amount = 32400, 
            Status = EntityStatus.Inactive, 
            StatusText = "å·²å®Œæˆ", 
            ItemCount = 5 
        },
        new SampleOrder 
        { 
            OrderNumber = "ORD-2024-003", 
            OrderDate = new DateTime(2024, 9, 12), 
            Amount = 18900, 
            Status = EntityStatus.Deleted, 
            StatusText = "å·²å–æ¶ˆ", 
            ItemCount = 3 
        }
    };
    
    private void ShowMessage(string message)
    {
        actionMessage = message;
    }
    
    private string GetStatusIcon(EntityStatus status)
    {
        return status switch
        {
            EntityStatus.Active => "bi bi-check-circle-fill",
            EntityStatus.Inactive => "bi bi-pause-circle-fill",
            EntityStatus.Deleted => "bi bi-x-circle-fill",
            _ => "bi bi-question-circle-fill"
        };
    }
    
    private string GetOrderStatusIcon(EntityStatus status)
    {
        return status switch
        {
            EntityStatus.Active => "bi bi-arrow-clockwise",
            EntityStatus.Inactive => "bi bi-check-circle",
            EntityStatus.Deleted => "bi bi-x-circle",
            _ => "bi bi-question-circle"
        };
    }
    
    private class SampleCustomer
    {
        public string Code { get; set; } = string.Empty;
        public string Name { get; set; } = string.Empty;
        public string TaxId { get; set; } = string.Empty;
        public string Type { get; set; } = string.Empty;
        public string Phone { get; set; } = string.Empty;
        public string Email { get; set; } = string.Empty;
        public string Address { get; set; } = string.Empty;
        public EntityStatus Status { get; set; }
        public bool IsVip { get; set; }
        public string VipLevel { get; set; } = string.Empty;
        public DateTime CreatedDate { get; set; }
    }
    
    private class SampleOrder
    {
        public string OrderNumber { get; set; } = string.Empty;
        public DateTime OrderDate { get; set; }
        public decimal Amount { get; set; }
        public EntityStatus Status { get; set; }
        public string StatusText { get; set; } = string.Empty;
        public int ItemCount { get; set; }
    }
}
