@page "/sharedcomponentsdemo/details"
@using ERPCore2.Components.Shared.Details
@using ERPCore2.Components.Shared.Badges
@using static ERPCore2.Components.Shared.Badges.StatusBadgeComponent
@rendermode InteractiveServer

<PageTitle>Details ÂÖÉ‰ª∂Â±ïÁ§∫</PageTitle>

<div class="container-fluid">
    <h1 class="h3 mb-4">Details ÂÖÉ‰ª∂Â±ïÁ§∫</h1>
    
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Details ÂÖÉ‰ª∂ÁØÑ‰æã</h5>
                </div>
                <div class="card-body">
                    <p class="text-muted mb-4">
                        Details ÂÖÉ‰ª∂Áî®ÊñºÁµêÊßãÂåñÈ°ØÁ§∫Ë©≥Á¥∞Ë≥áË®äÔºåÂåÖÂê´ DetailSectionComponent Âíå DetailItemComponentÔºå
                        Êèê‰æõÊ∏ÖÊô∞ÁöÑË≥áÊñôÂëàÁèæÂíåÁµÑÁπîÊñπÂºè„ÄÇ
                    </p>
                    
                    <h6>ÁØÑ‰æã 1: Âü∫Êú¨ÂÆ¢Êà∂Ë©≥Á¥∞Ë≥áÊñô</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="Âü∫Êú¨Ë≥áË®ä" IconClass="bi bi-person-circle">
                            <div class="col-md-6">
                                <DetailItemComponent Label="ÂÆ¢Êà∂Á∑®Ëôü" Value="@sampleCustomer.Code" IconClass="bi bi-hash" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="ÂÆ¢Êà∂ÂêçÁ®±" Value="@sampleCustomer.Name" IconClass="bi bi-building" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="Áµ±‰∏ÄÁ∑®Ëôü" Value="@sampleCustomer.TaxId" IconClass="bi bi-credit-card-2-front" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="ÂÆ¢Êà∂È°ûÂûã" Value="@sampleCustomer.Type" IconClass="bi bi-tags" />
                            </div>
                        </DetailSectionComponent>
                        
                        <DetailSectionComponent Title="ËÅØÁµ°Ë≥áË®ä" IconClass="bi bi-telephone">
                            <div class="col-md-6">
                                <DetailItemComponent Label="ÈõªË©±" Value="@sampleCustomer.Phone" IconClass="bi bi-phone" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="ÈõªÂ≠êÈÉµ‰ª∂" Value="@sampleCustomer.Email" IconClass="bi bi-envelope" />
                            </div>
                            <div class="col-md-12">
                                <DetailItemComponent Label="Âú∞ÂùÄ" Value="@sampleCustomer.Address" IconClass="bi bi-geo-alt" />
                            </div>
                        </DetailSectionComponent>
                        
                        <DetailSectionComponent Title="ÁãÄÊÖãË≥áË®ä" IconClass="bi bi-info-circle" ShowDivider="false">
                            <div class="col-md-4">
                                <DetailItemComponent Label="ÁõÆÂâçÁãÄÊÖã" IconClass="bi bi-circle-fill">
                                    <StatusBadgeComponent Status="@sampleCustomer.Status" IconClass="@GetStatusIcon(sampleCustomer.Status)" />
                                </DetailItemComponent>
                            </div>
                            <div class="col-md-4">
                                <DetailItemComponent Label="VIP Á≠âÁ¥ö" IconClass="bi bi-star">
                                    @if (sampleCustomer.IsVip)
                                    {
                                        <StatusBadgeComponent Status="EntityStatus.Active" 
                                                            CustomText="@sampleCustomer.VipLevel" 
                                                            IconClass="bi bi-gem" />
                                    }
                                    else
                                    {
                                        <span class="text-muted">‰∏ÄËà¨ÂÆ¢Êà∂</span>
                                    }
                                </DetailItemComponent>
                            </div>
                            <div class="col-md-4">
                                <DetailItemComponent Label="Âª∫Á´ãÊó•Êúü" Value="@sampleCustomer.CreatedDate.ToString("yyyy/MM/dd")" IconClass="bi bi-calendar" />
                            </div>
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ÁØÑ‰æã 2: Á©∫ÂÄºÂíåÈ†êË®≠ÊñáÂ≠óËôïÁêÜ</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="Á©∫ÂÄºÂ±ïÁ§∫" IconClass="bi bi-question-circle">
                            <div class="col-md-4">
                                <DetailItemComponent Label="Á©∫ÂÄº (È†êË®≠)" Value="@emptyValue" />
                            </div>
                            <div class="col-md-4">
                                <DetailItemComponent Label="Á©∫ÂÄº (Ëá™Ë®Ç)" Value="@emptyValue" EmptyText="ÁÑ°Ë≥áÊñô" />
                            </div>
                            <div class="col-md-4">
                                <DetailItemComponent Label="Á©∫ÂÄº (ÁâπÊÆä)" Value="@emptyValue" EmptyText="üö´ Êú™Ë®≠ÂÆö" />
                            </div>
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ÁØÑ‰æã 3: Ëá™Ë®ÇÂÖßÂÆπÂ±ïÁ§∫</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="Ë±êÂØåÂÖßÂÆπÂ±ïÁ§∫" IconClass="bi bi-palette">
                            <div class="col-md-6">
                                <DetailItemComponent Label="Áî¢ÂìÅÊ∏ÖÂñÆ" IconClass="bi bi-list-ul">
                                    <ul class="mb-0">
                                        <li>Ê∞¥Ê≥•Á£öÂ°ä <span class="badge bg-success">ÁÜ±Èä∑</span></li>
                                        <li>Á¥ÖÁ£öÊùêÊñô <span class="badge bg-warning text-dark">ÊôÆÈÄö</span></li>
                                        <li>ÁâπÊÆäÁ£öÊùê <span class="badge bg-info">Êñ∞ÂìÅ</span></li>
                                    </ul>
                                </DetailItemComponent>
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="Âø´ÈÄüÊìç‰Ωú" IconClass="bi bi-tools">
                                    <div class="btn-group btn-group-sm" role="group">
                                        <button type="button" class="btn btn-outline-primary" @onclick="@(() => ShowMessage("Á∑®ËºØÂÆ¢Êà∂"))">
                                            <i class="bi bi-pencil"></i> Á∑®ËºØ
                                        </button>
                                        <button type="button" class="btn btn-outline-success" @onclick="@(() => ShowMessage("ËÅØÁµ°ÂÆ¢Êà∂"))">
                                            <i class="bi bi-telephone"></i> ËÅØÁµ°
                                        </button>
                                        <button type="button" class="btn btn-outline-info" @onclick="@(() => ShowMessage("Êü•ÁúãË®ÇÂñÆ"))">
                                            <i class="bi bi-receipt"></i> Ë®ÇÂñÆ
                                        </button>
                                    </div>
                                </DetailItemComponent>
                            </div>
                            <div class="col-md-12">
                                <DetailItemComponent Label="‰∫§ÊòìÁµ±Ë®à" IconClass="bi bi-graph-up">
                                    <div class="row text-center">
                                        <div class="col-3">
                                            <div class="border rounded p-2">
                                                <div class="h5 text-primary mb-0">15</div>
                                                <small class="text-muted">Á∏ΩË®ÇÂñÆ</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="border rounded p-2">
                                                <div class="h5 text-success mb-0">$125,600</div>
                                                <small class="text-muted">Á∏ΩÈáëÈ°ç</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="border rounded p-2">
                                                <div class="h5 text-warning mb-0">3</div>
                                                <small class="text-muted">ÂæÖ‰ªòÊ¨æ</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="border rounded p-2">
                                                <div class="h5 text-info mb-0">98%</div>
                                                <small class="text-muted">ÊªøÊÑèÂ∫¶</small>
                                            </div>
                                        </div>
                                    </div>
                                </DetailItemComponent>
                            </div>
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ÁØÑ‰æã 4: Ê®£ÂºèËá™Ë®Ç</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="Ëá™Ë®ÇÊ®£ÂºèÂ±ïÁ§∫" IconClass="bi bi-brush" TitleClass="text-success">
                            <div class="col-md-6">
                                <DetailItemComponent Label="ÈáçË¶ÅË≥áË®ä" 
                                                   Value="È´òÂÑ™ÂÖàÁ¥öÂÆ¢Êà∂" 
                                                   IconClass="bi bi-exclamation-triangle-fill text-warning" 
                                                   LabelClass="text-danger fw-bold" 
                                                   ValueClass="text-danger fw-bold" />
                            </div>
                            <div class="col-md-6">
                                <DetailItemComponent Label="Ê¨°Ë¶ÅË≥áË®ä" 
                                                   Value="‰∏ÄËà¨ÂÇôË®ªË≥áË®ä" 
                                                   IconClass="bi bi-info-circle text-muted" 
                                                   LabelClass="text-muted" 
                                                   ValueClass="text-muted small" />
                            </div>
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ÁØÑ‰æã 5: Â§öÂ±§Ê¨°Ë≥áÊñôÁµêÊßã</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="Ë®ÇÂñÆÊ≠∑Âè≤" IconClass="bi bi-clock-history">
                            @foreach (var order in sampleOrders)
                            {
                                <div class="col-12 mb-3">
                                    <div class="card">
                                        <div class="card-header py-2">
                                            <h6 class="mb-0">Ë®ÇÂñÆ #@order.OrderNumber</h6>
                                        </div>
                                        <div class="card-body py-2">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <DetailItemComponent Label="Ë®ÇÂñÆÊó•Êúü" Value="@order.OrderDate.ToString("yyyy/MM/dd")" />
                                                </div>
                                                <div class="col-md-3">
                                                    <DetailItemComponent Label="Ë®ÇÂñÆÈáëÈ°ç" Value="@order.Amount.ToString("C")" />
                                                </div>
                                                <div class="col-md-3">
                                                    <DetailItemComponent Label="Ë®ÇÂñÆÁãÄÊÖã">
                                                        <StatusBadgeComponent Status="@order.Status" 
                                                                            CustomText="@order.StatusText" 
                                                                            IconClass="@GetOrderStatusIcon(order.Status)" 
                                                                            Size="BadgeSize.Small" />
                                                    </DetailItemComponent>
                                                </div>
                                                <div class="col-md-3">
                                                    <DetailItemComponent Label="Áî¢ÂìÅÊï∏Èáè" Value="@order.ItemCount.ToString()" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </DetailSectionComponent>
                    </div>
                    
                    <h6>ÁØÑ‰æã 6: ÈüøÊáâÂºè‰ΩàÂ±Ä</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <DetailSectionComponent Title="ÈüøÊáâÂºèÂ±ïÁ§∫" IconClass="bi bi-phone" ShowDivider="false">
                            <div class="col-lg-3 col-md-6">
                                <DetailItemComponent Label="Â§ßËû¢Âπï 1/4" Value="Ê°åÈù¢È°ØÁ§∫" IconClass="bi bi-display" />
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <DetailItemComponent Label="Âπ≥Êùø 1/2" Value="Âπ≥ÊùøÈ°ØÁ§∫" IconClass="bi bi-tablet" />
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <DetailItemComponent Label="ÊâãÊ©üÂÖ®ÂØ¨" Value="ÊâãÊ©üÈ°ØÁ§∫" IconClass="bi bi-phone" />
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <DetailItemComponent Label="ÂΩàÊÄß‰ΩàÂ±Ä" Value="Ëá™ÈÅ©Êáâ" IconClass="bi bi-arrows-expand" />
                            </div>
                        </DetailSectionComponent>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    @if (!string.IsNullOrEmpty(actionMessage))
    {
        <div class="alert alert-info alert-dismissible fade show mt-3" role="alert">
            <i class="bi bi-info-circle me-2"></i>
            @actionMessage
            <button type="button" class="btn-close" @onclick="@(() => actionMessage = string.Empty)"></button>
        </div>
    }
</div>

@code {
    private string actionMessage = string.Empty;
    private string? emptyValue = null;
    
    // ÁØÑ‰æãÂÆ¢Êà∂Ë≥áÊñô
    private SampleCustomer sampleCustomer = new()
    {
        Code = "C001",
        Name = "Âè∞ÂåóÂª∫ÊùêÊúâÈôêÂÖ¨Âè∏",
        TaxId = "12345678",
        Type = "‰ºÅÊ•≠ÂÆ¢Êà∂",
        Phone = "(02) 2123-4567",
        Email = "info@taipei-building.com",
        Address = "Âè∞ÂåóÂ∏Ç‰ø°Áæ©ÂçÄ‰ø°Áæ©Ë∑Ø‰∫îÊÆµ7Ëôü",
        Status = EntityStatus.Active,
        IsVip = true,
        VipLevel = "ÈáëÁâå",
        CreatedDate = new DateTime(2023, 3, 15)
    };
    
    // ÁØÑ‰æãË®ÇÂñÆË≥áÊñô
    private List<SampleOrder> sampleOrders = new()
    {
        new SampleOrder 
        { 
            OrderNumber = "ORD-2024-001", 
            OrderDate = new DateTime(2024, 11, 15), 
            Amount = 45600, 
            Status = EntityStatus.Active, 
            StatusText = "ÈÄ≤Ë°å‰∏≠", 
            ItemCount = 8 
        },
        new SampleOrder 
        { 
            OrderNumber = "ORD-2024-002", 
            OrderDate = new DateTime(2024, 10, 28), 
            Amount = 32400, 
            Status = EntityStatus.Inactive, 
            StatusText = "Â∑≤ÂÆåÊàê", 
            ItemCount = 5 
        },
        new SampleOrder 
        { 
            OrderNumber = "ORD-2024-003", 
            OrderDate = new DateTime(2024, 9, 12), 
            Amount = 18900, 
            Status = EntityStatus.Deleted, 
            StatusText = "Â∑≤ÂèñÊ∂à", 
            ItemCount = 3 
        }
    };
    
    private void ShowMessage(string message)
    {
        actionMessage = message;
    }
    
    private string GetStatusIcon(EntityStatus status)
    {
        return status switch
        {
            EntityStatus.Active => "bi bi-check-circle-fill",
            EntityStatus.Inactive => "bi bi-pause-circle-fill",
            EntityStatus.Deleted => "bi bi-x-circle-fill",
            _ => "bi bi-question-circle-fill"
        };
    }
    
    private string GetOrderStatusIcon(EntityStatus status)
    {
        return status switch
        {
            EntityStatus.Active => "bi bi-arrow-clockwise",
            EntityStatus.Inactive => "bi bi-check-circle",
            EntityStatus.Deleted => "bi bi-x-circle",
            _ => "bi bi-question-circle"
        };
    }
    
    private class SampleCustomer
    {
        public string Code { get; set; } = string.Empty;
        public string Name { get; set; } = string.Empty;
        public string TaxId { get; set; } = string.Empty;
        public string Type { get; set; } = string.Empty;
        public string Phone { get; set; } = string.Empty;
        public string Email { get; set; } = string.Empty;
        public string Address { get; set; } = string.Empty;
        public EntityStatus Status { get; set; }
        public bool IsVip { get; set; }
        public string VipLevel { get; set; } = string.Empty;
        public DateTime CreatedDate { get; set; }
    }
    
    private class SampleOrder
    {
        public string OrderNumber { get; set; } = string.Empty;
        public DateTime OrderDate { get; set; }
        public decimal Amount { get; set; }
        public EntityStatus Status { get; set; }
        public string StatusText { get; set; } = string.Empty;
        public int ItemCount { get; set; }
    }
}
