@page "/sharedcomponentsdemo/badges"
@using static ERPCore2.Components.Shared.Badges.StatusBadgeComponent
@rendermode InteractiveServer

<PageTitle>Badges 元件展示</PageTitle>

<div class="container-fluid">
    <h1 class="h3 mb-4">Badges 元件展示</h1>
    
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">StatusBadgeComponent 元件範例</h5>
                </div>
                <div class="card-body">
                    <p class="text-muted mb-4">
                        StatusBadgeComponent 元件用於顯示實體的狀態，支援不同的狀態類型、大小和自訂文字。
                    </p>
                    
                    <h6>範例 1: 基本狀態徽章</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label">啟用狀態:</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Active" />
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">停用狀態:</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Inactive" />
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">已刪除狀態:</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Deleted" />
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">未知狀態:</label>
                                <br>
                                <StatusBadgeComponent Status="(EntityStatus)999" />
                            </div>
                        </div>
                    </div>
                    
                    <h6>範例 2: 帶圖示的狀態徽章</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label class="form-label">啟用 (帶勾選圖示):</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Active" IconClass="bi bi-check-circle-fill" />
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">停用 (帶暫停圖示):</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Inactive" IconClass="bi bi-pause-circle-fill" />
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">已刪除 (帶垃圾桶圖示):</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Deleted" IconClass="bi bi-trash-fill" />
                            </div>
                        </div>
                    </div>
                    
                    <h6>範例 3: 不同尺寸的徽章</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row g-3 align-items-center">
                            <div class="col-md-6">
                                <label class="form-label">小型徽章:</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Active" Size="BadgeSize.Small" IconClass="bi bi-check" />
                                <StatusBadgeComponent Status="EntityStatus.Inactive" Size="BadgeSize.Small" IconClass="bi bi-pause" CssClass="ms-2" />
                                <StatusBadgeComponent Status="EntityStatus.Deleted" Size="BadgeSize.Small" IconClass="bi bi-x" CssClass="ms-2" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">標準徽章:</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Active" Size="BadgeSize.Normal" IconClass="bi bi-check-circle" />
                                <StatusBadgeComponent Status="EntityStatus.Inactive" Size="BadgeSize.Normal" IconClass="bi bi-pause-circle" CssClass="ms-2" />
                                <StatusBadgeComponent Status="EntityStatus.Deleted" Size="BadgeSize.Normal" IconClass="bi bi-x-circle" CssClass="ms-2" />
                            </div>
                        </div>
                    </div>
                    
                    <h6>範例 4: 自訂文字徽章</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label">VIP 客戶:</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Active" CustomText="VIP" IconClass="bi bi-star-fill" />
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">待審核:</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Inactive" CustomText="待審核" IconClass="bi bi-clock-fill" />
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">已過期:</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Deleted" CustomText="已過期" IconClass="bi bi-exclamation-triangle-fill" />
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">新客戶:</label>
                                <br>
                                <StatusBadgeComponent Status="EntityStatus.Active" CustomText="新客戶" IconClass="bi bi-person-plus-fill" />
                            </div>
                        </div>
                    </div>
                    
                    <h6>範例 5: 客戶列表狀態展示</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>客戶編號</th>
                                        <th>客戶名稱</th>
                                        <th>客戶類型</th>
                                        <th>狀態</th>
                                        <th>VIP等級</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var customer in sampleCustomers)
                                    {
                                        <tr>
                                            <td>@customer.Code</td>
                                            <td>@customer.Name</td>
                                            <td>@customer.Type</td>
                                            <td>
                                                <StatusBadgeComponent Status="@customer.Status" 
                                                                    IconClass="@GetStatusIcon(customer.Status)" />
                                            </td>
                                            <td>
                                                @if (customer.IsVip)
                                                {
                                                    <StatusBadgeComponent Status="EntityStatus.Active" 
                                                                        CustomText="@customer.VipLevel" 
                                                                        IconClass="bi bi-gem" 
                                                                        Size="BadgeSize.Small" />
                                                }
                                                else
                                                {
                                                    <span class="text-muted">一般客戶</span>
                                                }
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <h6>範例 6: 動態徽章控制</h6>
                    <div class="border p-3 mb-4 bg-light">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">選擇狀態:</label>
                                <select class="form-select" @bind="selectedStatus">
                                    <option value="@EntityStatus.Active">啟用</option>
                                    <option value="@EntityStatus.Inactive">停用</option>
                                    <option value="@EntityStatus.Deleted">已刪除</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">自訂文字:</label>
                                <input type="text" class="form-control" @bind="customText" placeholder="輸入自訂文字" />
                            </div>
                            <div class="col-12">
                                <label class="form-label">預覽:</label>
                                <br>
                                <StatusBadgeComponent Status="@selectedStatus" 
                                                    CustomText="@(!string.IsNullOrEmpty(customText) ? customText : null)" 
                                                    IconClass="@GetStatusIcon(selectedStatus)" 
                                                    Size="@selectedSize" />
                                <div class="mt-2">
                                    <button class="btn btn-sm btn-outline-primary me-2" @onclick="@(() => selectedSize = BadgeSize.Small)">
                                        小型
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary" @onclick="@(() => selectedSize = BadgeSize.Normal)">
                                        標準
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    @if (!string.IsNullOrEmpty(actionMessage))
    {
        <div class="alert alert-info alert-dismissible fade show mt-3" role="alert">
            <i class="bi bi-info-circle me-2"></i>
            @actionMessage
            <button type="button" class="btn-close" @onclick="@(() => actionMessage = string.Empty)"></button>
        </div>
    }
</div>

@code {
    private string actionMessage = string.Empty;
    private EntityStatus selectedStatus = EntityStatus.Active;
    private string customText = string.Empty;
    private BadgeSize selectedSize = BadgeSize.Normal;
    
    // 範例客戶資料
    private List<SampleCustomer> sampleCustomers = new()
    {
        new SampleCustomer { Code = "C001", Name = "台北建材有限公司", Type = "企業客戶", Status = EntityStatus.Active, IsVip = true, VipLevel = "金牌" },
        new SampleCustomer { Code = "C002", Name = "高雄營造股份有限公司", Type = "企業客戶", Status = EntityStatus.Active, IsVip = true, VipLevel = "鑽石" },
        new SampleCustomer { Code = "C003", Name = "王小明", Type = "個人客戶", Status = EntityStatus.Inactive, IsVip = false, VipLevel = "" },
        new SampleCustomer { Code = "C004", Name = "林建設工程行", Type = "工程客戶", Status = EntityStatus.Active, IsVip = true, VipLevel = "銀牌" },
        new SampleCustomer { Code = "C005", Name = "中部裝潢設計", Type = "設計客戶", Status = EntityStatus.Deleted, IsVip = false, VipLevel = "" },
        new SampleCustomer { Code = "C006", Name = "南部石材商行", Type = "供應商", Status = EntityStatus.Active, IsVip = false, VipLevel = "" }
    };
    
    private string GetStatusIcon(EntityStatus status)
    {
        return status switch
        {
            EntityStatus.Active => "bi bi-check-circle-fill",
            EntityStatus.Inactive => "bi bi-pause-circle-fill",
            EntityStatus.Deleted => "bi bi-x-circle-fill",
            _ => "bi bi-question-circle-fill"
        };
    }
    
    private class SampleCustomer
    {
        public string Code { get; set; } = string.Empty;
        public string Name { get; set; } = string.Empty;
        public string Type { get; set; } = string.Empty;
        public EntityStatus Status { get; set; }
        public bool IsVip { get; set; }
        public string VipLevel { get; set; } = string.Empty;
    }
}
