@page "/examples/customer-detail-migration"
@using ERPCore2.Components.Shared.Details
@using Microsoft.AspNetCore.Components.Web

<PageTitle>客戶詳細頁面遷移範例</PageTitle>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <h2 class="mb-4">
                <i class="fas fa-building text-primary me-2"></i>
                客戶詳細頁面遷移範例
            </h2>
            <p class="text-muted mb-4">
                展示如何將現有的 CustomerDetail 頁面遷移到使用 BasicInfoDisplayComponent
            </p>
        </div>
    </div>

    <!-- 原始寫法 (使用 DetailFieldComponent) -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-code me-2"></i>
                        原始寫法 (DetailFieldComponent)
                    </h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        這是原始的 CustomerDetail 使用 DetailFieldComponent 的寫法
                    </div>
                    
                    <!-- 模擬原始的 DetailFieldComponent 結構 -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h6 class="text-primary mb-1 fw-bold">統一編號 *</h6>
                                <div class="fw-bold text-primary">12345678</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h6 class="text-dark mb-1 fw-bold">公司名稱</h6>
                                <div class="fw-bold">台灣科技股份有限公司</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h6 class="text-dark mb-1">聯絡人</h6>
                                <div>王大明</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h6 class="text-dark mb-1">客戶類型</h6>
                                <div>企業客戶</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h6 class="text-dark mb-1">行業類型</h6>
                                <div>科技業</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h6 class="text-dark mb-1">狀態</h6>
                                <div><span class="badge bg-success">啟用</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 新的寫法 (使用 BasicInfoDisplayComponent) -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-magic me-2"></i>
                        新的寫法 (BasicInfoDisplayComponent)
                    </h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-success">
                        <i class="fas fa-check-circle me-2"></i>
                        使用新的 BasicInfoDisplayComponent，更美觀且功能豐富
                    </div>
                    
                    <BasicInfoDisplayComponent 
                        Title="客戶基本資訊"
                        IconClass="fas fa-building"
                        IconColor="text-primary"
                        Fields="@GetCustomerBasicFields()"
                        ShowFieldCount="false"
                        DefaultColSize="6" />
                </div>
            </div>
        </div>
    </div>

    <!-- 進階功能展示 -->
    <div class="row mb-5">
        <div class="col-12">
            <BasicInfoDisplayComponent 
                Title="客戶進階資訊"
                IconClass="fas fa-chart-line"
                IconColor="text-success"
                Fields="@GetCustomerAdvancedFields()"
                ShowFieldCount="true"
                ShowStatistics="true"
                DefaultColSize="4">
                
                <AdditionalContent>
                    <div class="alert alert-info">
                        <i class="fas fa-lightbulb me-2"></i>
                        這是額外內容區域，可以放置任何自訂內容！
                    </div>
                </AdditionalContent>
            </BasicInfoDisplayComponent>
        </div>
    </div>

    <!-- 聯絡資訊範例 -->
    <div class="row mb-5">
        <div class="col-12">
            <BasicInfoDisplayComponent 
                Title="聯絡資訊"
                IconClass="fas fa-address-book"
                IconColor="text-info"
                Fields="@GetContactFields()"
                DefaultColSize="6" />
        </div>
    </div>
</div>

@code {
    // 模擬客戶資料類別
    private class MockCustomer
    {
        public int Id { get; set; }
        public string? TaxNumber { get; set; }
        public string? CompanyName { get; set; }
        public string? ContactPerson { get; set; }
        public string Status { get; set; } = "Active";
        public DateTime CreatedAt { get; set; }
        public DateTime? UpdatedAt { get; set; }
        public string? Remarks { get; set; }
    }

    // 模擬客戶資料
    private MockCustomer mockCustomer = new()
    {
        Id = 1,
        TaxNumber = "12345678",
        CompanyName = "台灣科技股份有限公司",
        ContactPerson = "王大明",
        Status = "Active",
        CreatedAt = DateTime.Now.AddDays(-30),
        UpdatedAt = DateTime.Now.AddDays(-1),
        Remarks = "重要客戶，請優先處理相關業務。"
    };

    private IEnumerable<BasicInfoDisplayComponent.BasicInfoField> GetCustomerBasicFields()
    {
        return new List<BasicInfoDisplayComponent.BasicInfoField>
        {
            new()
            {
                Label = "統一編號",
                Value = mockCustomer.TaxNumber,
                IsPrimary = true,
                ValueBold = true,
                IsRequired = true,
                IconClass = "fas fa-id-card",
                IconBgClass = "bg-primary bg-opacity-10",
                IconTextClass = "text-primary",
                ColSize = 6,
                Description = "公司統一編號，用於稅務申報"
            },
            new()
            {
                Label = "公司名稱",
                Value = mockCustomer.CompanyName,
                ValueBold = true,
                IconClass = "fas fa-building",
                IconBgClass = "bg-info bg-opacity-10",
                IconTextClass = "text-info",
                ColSize = 6
            },
            new()
            {
                Label = "聯絡人",
                Value = mockCustomer.ContactPerson,
                IconClass = "fas fa-user",
                IconBgClass = "bg-success bg-opacity-10",
                IconTextClass = "text-success",
                ColSize = 6
            },
            new()
            {
                Label = "客戶類型",
                Value = "企業客戶",
                Type = BasicInfoDisplayComponent.FieldType.Badge,
                BadgeText = "企業客戶",
                BadgeClass = "bg-primary",
                BadgeIcon = "fas fa-briefcase",
                IconClass = "fas fa-tags",
                IconBgClass = "bg-warning bg-opacity-10",
                IconTextClass = "text-warning",
                ColSize = 6
            },
            new()
            {
                Label = "行業類型",
                Value = "科技業",
                Type = BasicInfoDisplayComponent.FieldType.Badge,
                BadgeText = "科技業",
                BadgeClass = "bg-info",
                BadgeIcon = "fas fa-laptop",
                IconClass = "fas fa-industry",
                IconBgClass = "bg-secondary bg-opacity-10",
                IconTextClass = "text-secondary",
                ColSize = 6
            },            new()
            {
                Label = "狀態",
                Type = BasicInfoDisplayComponent.FieldType.Badge,
                BadgeText = mockCustomer.Status == "Active" ? "啟用" : "停用",
                BadgeClass = mockCustomer.Status == "Active" ? "bg-success" : "bg-danger",
                IconClass = "fas fa-toggle-on",
                IconBgClass = "bg-success bg-opacity-10",
                IconTextClass = "text-success",
                ColSize = 6
            },
            new()
            {
                Label = "備註",
                Value = mockCustomer.Remarks,
                Format = BasicInfoDisplayComponent.FieldFormat.MultiLine,
                IconClass = "fas fa-sticky-note",
                IconBgClass = "bg-warning bg-opacity-10",
                IconTextClass = "text-warning",
                ColSize = 12,
                Description = "客戶相關注意事項"
            }
        };
    }

    private IEnumerable<BasicInfoDisplayComponent.BasicInfoField> GetCustomerAdvancedFields()
    {
        return new List<BasicInfoDisplayComponent.BasicInfoField>
        {
            new()
            {
                Label = "信用額度",
                Value = 1000000m,
                Format = BasicInfoDisplayComponent.FieldFormat.Currency,
                ValueBold = true,
                IconClass = "fas fa-credit-card",
                IconBgClass = "bg-success bg-opacity-10",
                IconTextClass = "text-success"
            },
            new()
            {
                Label = "信用評等",
                Type = BasicInfoDisplayComponent.FieldType.Rating,
                RatingValue = 4,
                RatingMax = 5,
                IconClass = "fas fa-star",
                IconBgClass = "bg-warning bg-opacity-10",
                IconTextClass = "text-warning"
            },
            new()
            {
                Label = "合作期間",
                Value = 365,
                Suffix = " 天",
                Format = BasicInfoDisplayComponent.FieldFormat.Integer,
                IconClass = "fas fa-calendar-alt",
                IconBgClass = "bg-info bg-opacity-10",
                IconTextClass = "text-info"
            },
            new()
            {
                Label = "付款條件",
                Value = "月結30天",
                Type = BasicInfoDisplayComponent.FieldType.Badge,
                BadgeText = "月結30天",
                BadgeClass = "bg-secondary",
                IconClass = "fas fa-money-check",
                IconBgClass = "bg-primary bg-opacity-10",
                IconTextClass = "text-primary"
            },
            new()
            {
                Label = "交易完成度",
                Type = BasicInfoDisplayComponent.FieldType.Progress,
                ProgressValue = 85,
                ProgressMax = 100,
                ProgressClass = "bg-success",
                ShowProgressText = true,
                IconClass = "fas fa-chart-line",
                IconBgClass = "bg-success bg-opacity-10",
                IconTextClass = "text-success"
            },
            new()
            {
                Label = "優先等級",
                Value = "高",
                Type = BasicInfoDisplayComponent.FieldType.Badge,
                BadgeText = "高優先",
                BadgeClass = "bg-danger",
                BadgeIcon = "fas fa-exclamation",
                IconClass = "fas fa-flag",
                IconBgClass = "bg-danger bg-opacity-10",
                IconTextClass = "text-danger"
            }
        };
    }

    private IEnumerable<BasicInfoDisplayComponent.BasicInfoField> GetContactFields()
    {
        return new List<BasicInfoDisplayComponent.BasicInfoField>
        {
            new()
            {
                Label = "電子郵件",
                Value = "contact@techcorp.com.tw",
                Format = BasicInfoDisplayComponent.FieldFormat.Email,
                IconClass = "fas fa-envelope",
                IconBgClass = "bg-primary bg-opacity-10",
                IconTextClass = "text-primary"
            },
            new()
            {
                Label = "聯絡電話",
                Value = "02-1234-5678",
                Format = BasicInfoDisplayComponent.FieldFormat.Phone,
                IconClass = "fas fa-phone",
                IconBgClass = "bg-success bg-opacity-10",
                IconTextClass = "text-success"
            },
            new()
            {
                Label = "公司網站",
                Value = "https://www.techcorp.com.tw",
                Format = BasicInfoDisplayComponent.FieldFormat.Url,
                IconClass = "fas fa-globe",
                IconBgClass = "bg-info bg-opacity-10",
                IconTextClass = "text-info"
            },
            new()
            {
                Label = "傳真號碼",
                Value = "02-1234-5679",
                IconClass = "fas fa-fax",
                IconBgClass = "bg-secondary bg-opacity-10",
                IconTextClass = "text-secondary"
            },
            new()
            {
                Label = "地址",
                Value = "台北市信義區\n信義路五段7號\n101大樓35樓",
                Format = BasicInfoDisplayComponent.FieldFormat.MultiLine,
                IconClass = "fas fa-map-marker-alt",
                IconBgClass = "bg-warning bg-opacity-10",
                IconTextClass = "text-warning",
                ColSize = 12
            },
            new()
            {
                Label = "建立時間",
                Value = mockCustomer.CreatedAt,
                Format = BasicInfoDisplayComponent.FieldFormat.DateTime,
                IconClass = "fas fa-calendar-plus",
                IconBgClass = "bg-info bg-opacity-10",
                IconTextClass = "text-info",
                ColSize = 6
            }
        };
    }
}

<style>
    .alert {
        border-left: 4px solid;
    }
    
    .alert-info {
        border-left-color: #0dcaf0;
    }
    
    .alert-success {
        border-left-color: #198754;
    }
    
    .card-header {
        border-bottom: 2px solid rgba(255, 255, 255, 0.2);
    }
    
    .card {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: box-shadow 0.3s ease;
    }
    
    .card:hover {
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
    }
</style>
