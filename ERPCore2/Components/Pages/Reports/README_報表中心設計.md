# å ±è¡¨ç´¢å¼•åŠŸèƒ½è¨­è¨ˆèªªæ˜

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

å ±è¡¨ç´¢å¼•åŠŸèƒ½æä¾›ä¸€å€‹çµ±ä¸€çš„å…¥å£ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥ç€è¦½ä¸¦é¸æ“‡ç‰¹å®šæ¨¡çµ„ä¸‹çš„æ‰€æœ‰å ±è¡¨ã€‚æ¯å€‹æ¨¡çµ„ï¼ˆå¦‚å®¢æˆ¶ã€å» å•†ï¼‰éƒ½æœ‰è‡ªå·±çš„å ±è¡¨ä¸­å¿ƒã€‚

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

### æª”æ¡ˆçµæ§‹

```
Models/
â”œâ”€â”€ ReportDefinition.cs              # å ±è¡¨å®šç¾©æ¨¡å‹
â””â”€â”€ ReportCategoryConfig.cs          # å ±è¡¨åˆ†é¡è¨­å®šï¼ˆæ¨™é¡Œã€åœ–ç¤ºï¼‰

Data/
â””â”€â”€ ReportRegistry.cs                # å ±è¡¨è¨»å†Šè¡¨ï¼ˆé›†ä¸­ç®¡ç†ï¼‰

Components/
â”œâ”€â”€ Shared/
â”‚   â””â”€â”€ Report/
â”‚       â””â”€â”€ GenericReportIndexModalComponent.razor  # é€šç”¨å ±è¡¨ç´¢å¼• Modal
â”‚
â””â”€â”€ Pages/
    â””â”€â”€ Reports/
        â”œâ”€â”€ GenericReportIndexPage.razor     # é€šç”¨å ±è¡¨ä¸­å¿ƒï¼ˆæ”¯æ´æ‰€æœ‰åˆ†é¡ï¼‰
        â””â”€â”€ AccountsReceivableReportPage.razor  # æ‡‰æ”¶å¸³æ¬¾å ±è¡¨ï¼ˆç¾æœ‰ï¼‰
```

### çµ„ä»¶é—œä¿‚åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MainLayout                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚      GenericReportIndexPage (Category=Customer/Supplier/...)  â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚           GenericReportIndexModalComponent             â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â”‚        InteractiveTableComponent                 â”‚  â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â”‚  é¡¯ç¤ºå ±è¡¨æ¸…å–®ï¼Œæ¯è¡Œæœ‰ã€Œå‰å¾€ã€æŒ‰éˆ•                â”‚  â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                              â†“ é»æ“Šå‰å¾€                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  AccountsReceivableReportPageï¼ˆæˆ–å…¶ä»–å ±è¡¨ Modalï¼‰           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“– ä½¿ç”¨æ–¹å¼

### 1. æ–°å¢å ±è¡¨å®šç¾©

åœ¨ `Data/ReportRegistry.cs` ä¸­åŠ å…¥å ±è¡¨å®šç¾©ï¼š

```csharp
new ReportDefinition
{
    Id = "AR005",
    Name = "æ–°å ±è¡¨åç¨±",
    Description = "å ±è¡¨èªªæ˜",
    IconClass = "bi bi-file-earmark-text",
    Category = ReportCategory.Customer,  // æˆ–å…¶ä»–åˆ†é¡
    RequiredPermission = "Customer.Read",
    ActionId = "OpenNewReport",          // Action è­˜åˆ¥ç¢¼
    SortOrder = 5,
    IsEnabled = true                     // false è¡¨ç¤ºå°šæœªå¯¦ä½œ
}
```

### 2. å»ºç«‹å ±è¡¨ Modal çµ„ä»¶

åƒè€ƒ `AccountsReceivableReportPage.razor` å»ºç«‹æ–°çš„å ±è¡¨ Modalã€‚

### 3. åœ¨ MainLayout ä¸­è¨»å†Š Action

```csharp
// åœ¨ OnInitializedAsync ä¸­åŠ å…¥
actionRegistry.Register("OpenNewReport", OpenNewReport);

// åŠ å…¥é–‹å•Ÿæ–¹æ³•
public void OpenNewReport()
{
    showNewReport = true;
    StateHasChanged();
}
```

### 4. å°èˆªé¸å–®æ•´åˆ

å¦‚éœ€åœ¨å°èˆªé¸å–®ä¸­ç›´æ¥é¡¯ç¤ºå ±è¡¨å…¥å£ï¼Œå¯åœ¨ `NavigationConfig.cs` ä¸­ä½¿ç”¨ï¼š

```csharp
NavigationActionHelper.CreateActionItem(
    name: "å ±è¡¨åç¨±",
    description: "å ±è¡¨èªªæ˜",
    iconClass: "bi bi-printer-fill",
    actionId: "OpenNewReport",
    category: "åˆ†é¡",
    requiredPermission: "Permission.Read",
    searchKeywords: new List<string> { "é—œéµå­—" }
)
```

## ğŸ”„ æµç¨‹èªªæ˜

1. ä½¿ç”¨è€…å¾å°èˆªé¸å–®é»æ“Šã€Œå®¢æˆ¶å ±è¡¨ä¸­å¿ƒã€
2. é–‹å•Ÿ `GenericReportIndexPage` Modalï¼ˆCategory=Customerï¼‰
3. Modal ä½¿ç”¨ `InteractiveTableComponent` é¡¯ç¤ºæ‰€æœ‰å®¢æˆ¶ç›¸é—œå ±è¡¨
4. ä½¿ç”¨è€…é»æ“ŠæŸå ±è¡¨çš„ã€Œåˆ—å°ã€æŒ‰éˆ•
5. é—œé–‰å ±è¡¨ç´¢å¼• Modal
6. é€é `OnReportSelected` äº‹ä»¶å‚³é ActionId çµ¦ MainLayout
7. MainLayout åŸ·è¡Œå°æ‡‰çš„ Actionï¼Œé–‹å•Ÿå ±è¡¨ç¯©é¸ Modal

## ğŸ“Š å ±è¡¨åˆ†é¡å¸¸æ•¸

```csharp
public static class ReportCategory
{
    public const string Customer = "Customer";    // å®¢æˆ¶å ±è¡¨
    public const string Supplier = "Supplier";    // å» å•†å ±è¡¨
    public const string Financial = "Financial";  // è²¡å‹™å ±è¡¨
    public const string Inventory = "Inventory";  // åº«å­˜å ±è¡¨
    public const string Sales = "Sales";          // éŠ·å”®å ±è¡¨
    public const string Purchase = "Purchase";    // æ¡è³¼å ±è¡¨
}
```

## âœ… ç›®å‰å·²å¯¦ä½œ

| å ±è¡¨ä¸­å¿ƒ | Category åƒæ•¸ | Action ID |
|----------|---------------|----------|
| å®¢æˆ¶å ±è¡¨ä¸­å¿ƒ | `Customer` | `OpenCustomerReportIndex` |
| å» å•†å ±è¡¨ä¸­å¿ƒ | `Supplier` | `OpenSupplierReportIndex` |
| åº«å­˜å ±è¡¨ä¸­å¿ƒ | `Inventory` | `OpenInventoryReportIndex` |
| éŠ·å”®å ±è¡¨ä¸­å¿ƒ | `Sales` | `OpenSalesReportIndex` |
| æ¡è³¼å ±è¡¨ä¸­å¿ƒ | `Purchase` | `OpenPurchaseReportIndex` |
| è²¡å‹™å ±è¡¨ä¸­å¿ƒ | `Financial` | `OpenFinancialReportIndex` |