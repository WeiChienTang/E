@page "/inventory"
@inject NavigationManager Navigation
@inject IJSRuntime JSRuntime
@rendermode InteractiveServer

<PageTitle>庫存管理</PageTitle>

@* 頁面標題 *@
<GenericHeaderComponent Title="庫存管理"
                       Subtitle="庫存與倉庫管理中心"
                       TitleIcon="boxes"
                       HeadingLevel="h1"
                       BreadcrumbItems="@breadcrumbItems"
                       ShowDivider="true">
</GenericHeaderComponent>

@* 主要內容區域 *@
<div class="row">
    <div class="col-12">
        <div class="row g-4">
            @* 倉庫管理卡片 *@
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 card-hover">
                    <div class="card-body text-center">
                        <div class="card-icon mb-3">
                            <i class="bi bi-building text-primary" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">倉庫管理</h5>
                        <p class="card-text text-muted">
                            管理倉庫基本資料、庫位設定與倉庫相關資訊
                        </p>
                        <div class="mt-auto">
                            <button class="btn btn-primary" @onclick="GoToWarehouses">
                                <i class="bi bi-arrow-right me-1"></i>
                                進入管理
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            @* 單位管理卡片 *@
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 card-hover">
                    <div class="card-body text-center">
                        <div class="card-icon mb-3">
                            <i class="bi bi-rulers text-success" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">單位管理</h5>
                        <p class="card-text text-muted">
                            管理商品計量單位與單位轉換設定
                        </p>
                        <div class="mt-auto">
                            <button class="btn btn-success" @onclick="GoToUnits">
                                <i class="bi bi-arrow-right me-1"></i>
                                進入管理
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            @* 異動類型管理卡片 *@
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 card-hover">
                    <div class="card-body text-center">
                        <div class="card-icon mb-3">
                            <i class="bi bi-arrow-repeat text-warning" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">異動類型管理</h5>
                        <p class="card-text text-muted">
                            管理庫存異動類型與相關設定
                        </p>
                        <div class="mt-auto">
                            <button class="btn btn-warning" @onclick="GoToTransactionTypes">
                                <i class="bi bi-arrow-right me-1"></i>
                                進入管理
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            @* 庫位管理卡片 *@
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 card-hover">
                    <div class="card-body text-center">
                        <div class="card-icon mb-3">
                            <i class="bi bi-geo-alt text-info" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">庫位管理</h5>
                        <p class="card-text text-muted">
                            管理倉庫內部庫位配置與位置資訊
                        </p>
                        <div class="mt-auto">
                            <button class="btn btn-info" @onclick="ShowComingSoon">
                                <i class="bi bi-clock me-1"></i>
                                即將推出
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            @* 單位轉換管理卡片 *@
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 card-hover">
                    <div class="card-body text-center">
                        <div class="card-icon mb-3">
                            <i class="bi bi-shuffle text-secondary" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">單位轉換管理</h5>
                        <p class="card-text text-muted">
                            設定不同單位間的轉換關係與比例
                        </p>
                        <div class="mt-auto">
                            <button class="btn btn-secondary" @onclick="ShowComingSoon">
                                <i class="bi bi-clock me-1"></i>
                                即將推出
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            @* 快速統計卡片 *@
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 card-hover">
                    <div class="card-body text-center">
                        <div class="card-icon mb-3">
                            <i class="bi bi-graph-up text-dark" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">庫存報表</h5>
                        <p class="card-text text-muted">
                            查看庫存統計報表與分析資訊
                        </p>
                        <div class="mt-auto">
                            <button class="btn btn-dark" @onclick="ShowComingSoon">
                                <i class="bi bi-clock me-1"></i>
                                即將推出
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@* 快速操作區域 *@
<div class="row mt-5">
    <div class="col-12">
        <div class="card">
            <GenericHeaderComponent Title="快速操作"
                                   Subtitle="常用功能快速入口"
                                   TitleIcon="lightning"
                                   IsCardHeader="true">
            </GenericHeaderComponent>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-3">
                        <div class="d-grid">
                            <button class="btn btn-outline-primary" @onclick="GoToNewWarehouse">
                                <i class="bi bi-plus-circle me-2"></i>
                                新增倉庫
                            </button>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="d-grid">
                            <button class="btn btn-outline-success" @onclick="GoToNewUnit">
                                <i class="bi bi-plus-circle me-2"></i>
                                新增單位
                            </button>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="d-grid">
                            <button class="btn btn-outline-warning" @onclick="GoToNewTransactionType">
                                <i class="bi bi-plus-circle me-2"></i>
                                新增異動類型
                            </button>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="d-grid">
                            <button class="btn btn-outline-info" @onclick="ShowComingSoon">
                                <i class="bi bi-gear me-2"></i>
                                系統設定
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .card-hover {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

    .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .card-icon {
        margin-bottom: 1rem;
    }
</style>

@code {
    // 麵包屑導航
    private List<GenericHeaderComponent.BreadcrumbItem> breadcrumbItems = new();

    protected override async Task OnInitializedAsync()
    {
        InitializeBreadcrumbs();
        await Task.CompletedTask;
    }

    private void InitializeBreadcrumbs()
    {
        breadcrumbItems = new List<GenericHeaderComponent.BreadcrumbItem>
        {
            new("首頁", "/"),
            new("庫存管理")
        };
    }

    private async Task GoToWarehouses()
    {
        Navigation.NavigateTo("/warehouses");
        await Task.CompletedTask;
    }

    private async Task GoToUnits()
    {
        Navigation.NavigateTo("/units");
        await Task.CompletedTask;
    }

    private async Task GoToTransactionTypes()
    {
        Navigation.NavigateTo("/transaction-types");
        await Task.CompletedTask;
    }

    private async Task GoToNewWarehouse()
    {
        Navigation.NavigateTo("/warehouses/edit");
        await Task.CompletedTask;
    }

    private async Task GoToNewUnit()
    {
        Navigation.NavigateTo("/units/edit");
        await Task.CompletedTask;
    }

    private async Task GoToNewTransactionType()
    {
        Navigation.NavigateTo("/transaction-types/edit");
        await Task.CompletedTask;
    }

    private async Task ShowComingSoon()
    {
        await JSRuntime.InvokeVoidAsync("alert", "此功能即將推出，敬請期待！");
    }
}
