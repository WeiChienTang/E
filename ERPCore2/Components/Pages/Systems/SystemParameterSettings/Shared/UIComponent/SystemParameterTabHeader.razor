@* 系統參數標籤頁表頭通用元件 *@

<div class="card-header bg-white border-bottom">
    <ul class="nav nav-tabs card-header-tabs" role="tablist">
        @foreach (var tab in Tabs)
        {
            <li class="nav-item" role="presentation">
                <button class="nav-link @(ActiveTab == tab.Key ? "active" : "")" 
                        type="button" 
                        @onclick="() => OnTabClick(tab.Key)">
                    <i class="@tab.Icon me-2"></i>
                    @tab.Label
                </button>
            </li>
        }
    </ul>
</div>

@code {
    /// <summary>
    /// 標籤頁定義列表
    /// </summary>
    [Parameter]
    public List<TabDefinition> Tabs { get; set; } = new();

    /// <summary>
    /// 當前啟用的標籤頁
    /// </summary>
    [Parameter]
    public string ActiveTab { get; set; } = string.Empty;

    /// <summary>
    /// 標籤頁切換事件回調
    /// </summary>
    [Parameter]
    public EventCallback<string> ActiveTabChanged { get; set; }

    /// <summary>
    /// 處理標籤點擊事件
    /// </summary>
    private async Task OnTabClick(string tabKey)
    {
        if (ActiveTab != tabKey)
        {
            await ActiveTabChanged.InvokeAsync(tabKey);
        }
    }

    /// <summary>
    /// 標籤頁定義類別
    /// </summary>
    public class TabDefinition
    {
        /// <summary>
        /// 標籤唯一識別碼
        /// </summary>
        public string Key { get; set; } = string.Empty;

        /// <summary>
        /// 顯示標籤文字
        /// </summary>
        public string Label { get; set; } = string.Empty;

        /// <summary>
        /// 圖示 CSS 類別 (Font Awesome)
        /// </summary>
        public string Icon { get; set; } = string.Empty;

        /// <summary>
        /// 建構子
        /// </summary>
        public TabDefinition() { }

        /// <summary>
        /// 建構子
        /// </summary>
        /// <param name="key">標籤唯一識別碼</param>
        /// <param name="label">顯示標籤文字</param>
        /// <param name="icon">圖示 CSS 類別</param>
        public TabDefinition(string key, string label, string icon)
        {
            Key = key;
            Label = label;
            Icon = icon;
        }
    }
}
