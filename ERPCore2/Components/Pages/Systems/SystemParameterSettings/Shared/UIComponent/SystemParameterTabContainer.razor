@* 系統參數標籤頁通用容器元件 *@
@using ERPCore2.Data

<div class="tab-pane fade show active">
    @if (IsLoading)
    {
        <div class="d-flex justify-content-center align-items-center py-5">
            <div class="spinner-border text-primary me-3" role="status"></div>
            <span>@LoadingText</span>
        </div>
    }
    else if (!string.IsNullOrEmpty(ErrorMessage))
    {
        <div class="alert alert-danger" role="alert">
            <h6 class="alert-heading">載入錯誤</h6>
            @ErrorMessage
        </div>
    }
    else
    {
        @* 子元件內容區域 *@
        <div class="tab-content-wrapper">
            @ChildContent
        </div>
        
        @* 統一的底部資訊（可選） *@
        @if (ShowFooter && Entity != null && Entity.Id > 0)
        {
            <div class="mt-4 pt-3 border-top">
                <div class="text-muted small d-flex flex-wrap gap-3">
                    <span><strong>建立時間：</strong>@Entity.CreatedAt.ToString("yyyy/MM/dd HH:mm:ss")</span>
                    <span><strong>創建者：</strong>@(Entity.CreatedBy ?? "系統")</span>
                    @if (Entity.UpdatedAt.HasValue)
                    {
                        <span><strong>最後更新：</strong>@Entity.UpdatedAt.Value.ToString("yyyy/MM/dd HH:mm:ss")</span>
                        <span><strong>最後修改者：</strong>@(Entity.UpdatedBy ?? "系統")</span>
                    }
                </div>
            </div>
        }
    }
</div>

@code {
    /// <summary>
    /// 子元件內容
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// 是否正在載入
    /// </summary>
    [Parameter]
    public bool IsLoading { get; set; } = false;

    /// <summary>
    /// 錯誤訊息
    /// </summary>
    [Parameter]
    public string? ErrorMessage { get; set; }

    /// <summary>
    /// 是否顯示底部資訊區域
    /// </summary>
    [Parameter]
    public bool ShowFooter { get; set; } = false;

    /// <summary>
    /// 實體資料（用於顯示建立時間、修改者等資訊）
    /// </summary>
    [Parameter]
    public BaseEntity? Entity { get; set; }

    /// <summary>
    /// 載入中的提示文字
    /// </summary>
    [Parameter]
    public string LoadingText { get; set; } = "載入系統參數中...";
}
