@* 稅務設定 Tab *@
@inject IStringLocalizer<SharedResource> L

<GenericFormComponent TModel="SystemParameter"
                      Model="@Model"
                      FieldDefinitions="@allFields"
                      FieldSections="@fieldSections" />

@code {
    [Parameter]
    public SystemParameter Model { get; set; } = new();

    private List<FormFieldDefinition> allFields = new();
    private Dictionary<string, string> fieldSections = new();

    protected override void OnInitialized()
    {
        var taxSection = L["Section.TaxSettings"].ToString();

        allFields = new List<FormFieldDefinition>
        {
            new FormFieldDefinition
            {
                PropertyName = "TaxRate",
                Label = L["Field.TaxRatePercent"],
                FieldType = FormFieldType.Number,
                IsRequired = true,
                Min = 0,
                Max = 100,
                Step = 0.01m,
                DecimalPlaces = 2,
                Placeholder = L["Placeholder.PleaseInput", L["Field.TaxRatePercent"]]
            },
            new FormFieldDefinition
            {
                PropertyName = "Remarks",
                Label = L["Label.Remarks"],
                FieldType = FormFieldType.TextArea,
                Placeholder = L["Placeholder.PleaseInput", L["Label.Remarks"]],
                Rows = 3,
                MaxLength = 500
            }
        };

        fieldSections = new Dictionary<string, string>
        {
            { "TaxRate", taxSection },
            { "Remarks", taxSection }
        };
    }
}
