# ç”Ÿç”¢æ’ç¨‹è¨­è¨ˆæ–‡æª”

## æ¦‚è¿°

ç”Ÿç”¢æ’ç¨‹æ¨¡çµ„ç”¨æ–¼å°‡éŠ·è²¨è¨‚å–®è½‰æ›ç‚ºç”Ÿç”¢è¨ˆåŠƒï¼Œè¿½è¹¤ç”Ÿç”¢é€²åº¦ï¼Œä¸¦ç®¡ç†è¨‚å–®èˆ‡ç”Ÿç”¢çš„é—œè¯ã€‚

## è³‡æ–™çµæ§‹

### ç¾æœ‰å¯¦é«”é—œä¿‚åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SalesOrder    â”‚ 1   n â”‚  SalesOrderDetail   â”‚ 1   n â”‚  ProductionScheduleItem  â”‚
â”‚   (éŠ·è²¨è¨‚å–®)     â”‚â”€â”€â”€â”€â”€â”€â”€â”‚  (è¨‚å–®æ˜ç´°)          â”‚â”€â”€â”€â”€â”€â”€â”€â”‚  (æ’ç¨‹é …ç›®)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚                              â”‚
                                   â”‚ ScheduledQuantity            â”‚
                                   â”‚ (å·²æ’ç¨‹æ•¸é‡)                  â”‚
                                   â”‚                              â”‚
                                   â–¼                              â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ PendingScheduleQty  â”‚       â”‚  ProductionSchedule     â”‚
                          â”‚ = OrderQty -        â”‚       â”‚  (æ’ç¨‹ä¸»æª”)              â”‚
                          â”‚   ScheduledQuantity â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¯¦é«”èªªæ˜

| å¯¦é«” | èªªæ˜ | é—œéµæ¬„ä½ |
|------|------|----------|
| `ProductionSchedule` | æ’ç¨‹ä¸»æª”ï¼ˆä¸€å¼µæ’ç¨‹å–®ï¼‰| `Code`, `ScheduleDate`, `CustomerId`, `CreatedByEmployeeId` |
| `ProductionScheduleItem` | æ’ç¨‹é …ç›®ï¼ˆæ¯å€‹è¦ç”Ÿç”¢çš„å•†å“ï¼‰| `ProductionScheduleId`, `ProductId`, `SalesOrderDetailId`, `ScheduledQuantity`, `CompletedQuantity` |
| `SalesOrderDetail` | è¨‚å–®æ˜ç´° | `ScheduledQuantity`ï¼ˆå·²æ’ç¨‹æ•¸é‡ï¼‰, `PendingScheduleQuantity`ï¼ˆå¾…æ’ç¨‹æ•¸é‡ï¼Œè¨ˆç®—å±¬æ€§ï¼‰|
| `ProductionScheduleAllocation` | åˆ†é…è¨˜éŒ„ï¼ˆå¤šè¨‚å–®å…±ç”¨åŒä¸€ç”Ÿç”¢æ‰¹æ¬¡æ™‚ä½¿ç”¨ï¼‰| `ProductionScheduleItemId`, `SalesOrderDetailId`, `AllocatedQuantity` |

### æ•¸é‡æ¬„ä½èªªæ˜

**SalesOrderDetail:**
- `OrderQuantity`: è¨‚å–®æ•¸é‡ï¼ˆå®¢æˆ¶è¨‚è³¼çš„ç¸½æ•¸ï¼‰
- `ScheduledQuantity`: å·²æ’ç¨‹æ•¸é‡ï¼ˆå·²è½‰å…¥ç”Ÿç”¢æ’ç¨‹çš„æ•¸é‡ï¼‰
- `PendingScheduleQuantity`: å¾…æ’ç¨‹æ•¸é‡ = `OrderQuantity - ScheduledQuantity`ï¼ˆè¨ˆç®—å±¬æ€§ï¼‰

**ProductionScheduleItem:**
- `ScheduledQuantity`: æ’ç¨‹æ•¸é‡ï¼ˆæœ¬æ¬¡æ’ç¨‹è¦ç”Ÿç”¢çš„æ•¸é‡ï¼‰
- `CompletedQuantity`: å·²å®Œæˆæ•¸é‡ï¼ˆå·²å…¥åº«çš„å®Œæˆå“æ•¸é‡ï¼‰
- `PendingQuantity`: å¾…å®Œæˆæ•¸é‡ = `ScheduledQuantity - CompletedQuantity`ï¼ˆè¨ˆç®—å±¬æ€§ï¼‰

---

## UI è¨­è¨ˆ

### ç”Ÿç”¢æ’ç¨‹ç·¨è¼¯ä»‹é¢ä½ˆå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ç”Ÿç”¢æ’ç¨‹ç·¨è¼¯                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [æ’ç¨‹ç·¨è™Ÿ] [æ’ç¨‹æ—¥æœŸ] [å®¢æˆ¶â–¼] [è£½å–®äººå“¡â–¼]                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        å¾…æ’ç¨‹è¨‚å–® (å·¦å´)            â”‚            æ’ç¨‹é …ç›® (å³å´)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” ç¯©é¸: [å®¢æˆ¶â–¼] [è¨‚å–®è™Ÿ_____]     â”‚                                             â”‚
â”‚                                    â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è¨‚å–®è™Ÿ    å®¢æˆ¶    å¾…æ’é …æ•¸  æ“ä½œâ”‚ â”‚ â”‚ å•†å“     ä¾†æºè¨‚å–®   æ’ç¨‹æ•¸é‡  ç‹€æ…‹  æ“ä½œâ”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ ğŸ”— SO2026-01 å®¢æˆ¶A   3é …   [â†’]â”‚ â”‚ â”‚ å•†å“A   SO2026-01   100    å¾…è™•ç†  [-] â”‚ â”‚
â”‚ â”‚ ğŸ”— SO2026-02 å®¢æˆ¶B   1é …   [â†’]â”‚ â”‚ â”‚ å•†å“B   SO2026-01    50    å¾…è™•ç†  [-] â”‚ â”‚
â”‚ â”‚ ğŸ”— SO2026-03 å®¢æˆ¶A   2é …   [â†’]â”‚ â”‚ â”‚ å•†å“C   SO2026-02    30    å¾…è™•ç†  [-] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                             â”‚
â”‚ * åªé¡¯ç¤ºæœ‰å¾…æ’ç¨‹é …ç›®çš„è¨‚å–®          â”‚ * ç·¨è¼¯æ¨¡å¼é¡¯ç¤ºå·²å­˜åœ¨çš„æ’ç¨‹é …ç›®               â”‚
â”‚ * ğŸ”— å¯æ‹–æ›³è‡³å³å´è¡¨æ ¼               â”‚ * æ”¯æ´å¾å·¦å´æ‹–æ”¾è¨‚å–®åŠ å…¥                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ˜ç´°é¸æ“‡å½ˆçª—ï¼ˆProductionScheduleDetailSelectorModalï¼‰

é»æ“Šå·¦å´è¨‚å–®çš„ `[â†’]` æŒ‰éˆ•æˆ–æ‹–æ”¾è¨‚å–®åˆ°å³å´è¡¨æ ¼å¾Œï¼Œå½ˆå‡ºæ˜ç´°é¸æ“‡è¦–çª—ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¸æ“‡æ’ç¨‹é …ç›® - SO2026-001 (å®¢æˆ¶A)                     [X]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è¨‚å–®è™Ÿç¢¼: SO2026-001          å®¢æˆ¶: å®¢æˆ¶A                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜‘  å•†å“åç¨±    è¨‚å–®æ•¸é‡  å·²æ’ç¨‹  å¯æ’ç¨‹   æ’ç¨‹æ•¸é‡        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â˜‘  P001        100       0      100     [100    ]       â”‚   â”‚
â”‚  â”‚    å•†å“A                                                 â”‚   â”‚
â”‚  â”‚ â˜‘  P002         50       0       50     [ 50    ]       â”‚   â”‚
â”‚  â”‚    å•†å“B                                                 â”‚   â”‚
â”‚  â”‚ âœ“  P003         30      30        0     (å·²å®Œæˆ)         â”‚   â”‚
â”‚  â”‚    å•†å“C                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  * â˜‘ ç‚ºå‹¾é¸æ¡†ï¼ˆå¯å…¨é¸/å…¨ä¸é¸ï¼‰                                  â”‚
â”‚  * âœ“ è¡¨ç¤ºå·²æ’å®Œï¼Œç„¡æ³•é¸å–                                       â”‚
â”‚  * ä½¿ç”¨ InteractiveTableComponent çš„ ShowSelectColumn åŠŸèƒ½      â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·²é¸æ“‡ 2 é …ï¼Œæ’ç¨‹æ•¸é‡åˆè¨ˆ: 150    [å–æ¶ˆ]    [ç¢ºèªåŠ å…¥ (2 é …)]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ‹–æ”¾åŠŸèƒ½è¨­è¨ˆï¼ˆå·²å¯¦ä½œï¼‰

### æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æ‹–æ”¾åŠŸèƒ½æ¶æ§‹                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ DragDropState.cs    â”‚                    â”‚ DragDropEventArgs.csâ”‚        â”‚
â”‚  â”‚ (éœæ…‹ç‹€æ…‹ç®¡ç†)       â”‚                    â”‚ (äº‹ä»¶åƒæ•¸)           â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚ â€¢ DraggedItem       â”‚                    â”‚ â€¢ DroppedItem       â”‚        â”‚
â”‚  â”‚ â€¢ DragDropGroup     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ â€¢ TargetIndex       â”‚        â”‚
â”‚  â”‚ â€¢ DraggedIndex      â”‚                    â”‚ â€¢ SourceTableId     â”‚        â”‚
â”‚  â”‚ â€¢ SourceTableId     â”‚                    â”‚ â€¢ TargetTableId     â”‚        â”‚
â”‚  â”‚ â€¢ IsDragging        â”‚                    â”‚ â€¢ GetDroppedItem<T> â”‚        â”‚
â”‚  â”‚ â€¢ StartDrag()       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”‚ â€¢ EndDrag()         â”‚                              â–²                    â”‚
â”‚  â”‚ â€¢ CanDropTo()       â”‚                              â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚                    â”‚
â”‚           â”‚                                           â”‚                    â”‚
â”‚           â–¼                                           â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    InteractiveTableComponent                         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ æ‹–æ›³ä¾†æºåƒæ•¸:                      æ”¾ç½®ç›®æ¨™åƒæ•¸:                      â”‚  â”‚
â”‚  â”‚ â€¢ EnableDrag = true                â€¢ EnableDrop = true               â”‚  â”‚
â”‚  â”‚ â€¢ DragDropGroup = "production-     â€¢ DragDropGroup = "production-    â”‚  â”‚
â”‚  â”‚                   schedule"                        schedule"         â”‚  â”‚
â”‚  â”‚ â€¢ TableId = "order-table"          â€¢ TableId = "item-table"          â”‚  â”‚
â”‚  â”‚ â€¢ OnDragStart                      â€¢ OnItemDropped                   â”‚  â”‚
â”‚  â”‚ â€¢ IsDraggable                      â€¢ DropZoneEmptyTemplate           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                       drag-drop-helper.js                          â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ â€¢ initDragDrop()             - åˆå§‹åŒ–æ‹–æ›³äº‹ä»¶                       â”‚     â”‚
â”‚  â”‚ â€¢ preventTextSelectionOnDrag() - é˜²æ­¢æ‹–æ›³æ™‚æ–‡å­—é¸å–                 â”‚     â”‚
â”‚  â”‚ â€¢ reinitDragDrop()           - Blazor æ›´æ–°å¾Œé‡æ–°åˆå§‹åŒ–              â”‚     â”‚
â”‚  â”‚ â€¢ setCheckboxIndeterminate() - è¨­å®š checkbox åŠé¸ç‹€æ…‹              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‹–æ”¾æµç¨‹

```
1. ä½¿ç”¨è€…åœ¨å·¦å´è¡¨æ ¼æŒ‰ä½è¨‚å–®åˆ—
   â””â”€â”€ InteractiveTableComponent è§¸ç™¼ @ondragstart
       â””â”€â”€ å‘¼å« DragDropState.StartDrag(item, group, index, tableId)
       â””â”€â”€ è§¸ç™¼ OnDragStart äº‹ä»¶

2. ä½¿ç”¨è€…æ‹–æ›³åˆ°å³å´è¡¨æ ¼ä¸Šæ–¹
   â””â”€â”€ InteractiveTableComponent è§¸ç™¼ @ondragover
       â””â”€â”€ å‘¼å« DragDropState.CanDropTo(group) æª¢æŸ¥æ˜¯å¦å¯æ”¾ç½®
       â””â”€â”€ é¡¯ç¤ºè¦–è¦ºæç¤ºï¼ˆDropZoneEmptyTemplate æˆ–è¡Œé«˜äº®ï¼‰

3. ä½¿ç”¨è€…æ”¾é–‹æ»‘é¼ ï¼ˆdropï¼‰
   â””â”€â”€ InteractiveTableComponent è§¸ç™¼ @ondrop
       â””â”€â”€ å»ºç«‹ DragDropEventArgs ä¸¦è§¸ç™¼ OnItemDropped äº‹ä»¶
       â””â”€â”€ å‘¼å« DragDropState.EndDrag() æ¸…é™¤ç‹€æ…‹

4. ProductionScheduleItemTable è™•ç† OnItemDropped
   â””â”€â”€ å¾ DragDropEventArgs.GetDroppedItem<PendingScheduleOrderDto>() å–å¾—è¨‚å–®
   â””â”€â”€ è§¸ç™¼ OnOrderDropped äº‹ä»¶é€šçŸ¥çˆ¶çµ„ä»¶

5. ProductionScheduleEditModalComponent è™•ç† OnOrderDropped
   â””â”€â”€ å‘¼å« HandleOrderSelected(order) é–‹å•Ÿæ˜ç´°é¸æ“‡å½ˆçª—
```

---

## é¸å–æ¬„ä½åŠŸèƒ½ï¼ˆInteractiveTableComponent æ–°å¢åŠŸèƒ½ï¼‰

### åŠŸèƒ½èªªæ˜

ç‚º `InteractiveTableComponent` æ–°å¢äº†ç¨ç«‹çš„é¸å–æ¬„ä½ï¼ˆShowSelectColumnï¼‰ï¼Œæ”¯æ´ï¼š

1. **å…¨é¸/å…¨ä¸é¸ Checkbox** - è¡¨é ­é¡¯ç¤ºï¼Œå¯ä¸€æ¬¡é¸å–/å–æ¶ˆæ‰€æœ‰å¯é¸é …ç›®
2. **åŠé¸ç‹€æ…‹ï¼ˆIndeterminateï¼‰** - ç•¶éƒ¨åˆ†é …ç›®è¢«é¸å–æ™‚é¡¯ç¤º
3. **å¯é¸å–åˆ¤æ–·** - é€é `IsItemSelectable` å‡½æ•¸åˆ¤æ–·ç‰¹å®šé …ç›®æ˜¯å¦å¯é¸
4. **ä¸å¯é¸å–æ›¿ä»£å…§å®¹** - é€é `UnselectableTemplate` é¡¯ç¤ºè‡ªè¨‚å…§å®¹ï¼ˆå¦‚å®Œæˆåœ–ç¤ºï¼‰

### ç›¸é—œåƒæ•¸

```csharp
// InteractiveTableComponent é¸å–æ¬„ä½åƒæ•¸
[Parameter] public bool ShowSelectColumn { get; set; } = false;
[Parameter] public string SelectColumnWidth { get; set; } = "50px";
[Parameter] public Func<TItem, bool>? IsItemSelectable { get; set; }
[Parameter] public RenderFragment<TItem>? UnselectableTemplate { get; set; }
[Parameter] public bool AllowMultipleSelection { get; set; } = false;
[Parameter] public HashSet<TItem>? SelectedItems { get; set; }
[Parameter] public EventCallback<HashSet<TItem>> OnSelectionChanged { get; set; }
```

### ä½¿ç”¨ç¯„ä¾‹ï¼ˆProductionScheduleDetailSelectorModalï¼‰

```razor
<InteractiveTableComponent TItem="PendingScheduleDetailDto"
                           Items="@Details"
                           ShowSelectColumn="true"
                           AllowMultipleSelection="true"
                           SelectedItems="@_selectedItems"
                           OnSelectionChanged="HandleSelectionChanged"
                           IsItemSelectable="@(d => d.PendingQuantity > 0)"
                           UnselectableTemplate="@GetUnselectableTemplate()" />
```

---

## æ“ä½œæµç¨‹

### æ–°å¢æ’ç¨‹æµç¨‹ï¼ˆå«æ‹–æ”¾ï¼‰

```
1. é–‹å•Ÿç”Ÿç”¢æ’ç¨‹ç·¨è¼¯ Modalï¼ˆæ–°å¢æ¨¡å¼ï¼‰
   â”œâ”€â”€ ç³»çµ±è‡ªå‹•ç”¢ç”Ÿæ’ç¨‹ç·¨è™Ÿ
   â””â”€â”€ å·¦å´è¼‰å…¥æ‰€æœ‰æœ‰å¾…æ’ç¨‹é …ç›®çš„è¨‚å–®

2. ä½¿ç”¨è€…å¡«å¯«ä¸»æª”è³‡è¨Š
   â”œâ”€â”€ æ’ç¨‹æ—¥æœŸï¼ˆé è¨­ä»Šå¤©ï¼‰
   â”œâ”€â”€ å®¢æˆ¶ï¼ˆå¯é¸ï¼Œå¯ç”¨æ–¼ç¯©é¸å·¦å´è¨‚å–®ï¼‰
   â””â”€â”€ è£½å–®äººå“¡

3. å¾å·¦å´é¸æ“‡è¨‚å–®ï¼ˆå…©ç¨®æ–¹å¼ï¼‰
   â”‚
   â”œâ”€â”€ æ–¹å¼ä¸€ï¼šé»æ“Š [â†’] æŒ‰éˆ•
   â”‚   â”œâ”€â”€ å½ˆå‡ºæ˜ç´°é¸æ“‡è¦–çª—
   â”‚   â”œâ”€â”€ å‹¾é¸è¦æ’ç¨‹çš„å•†å“ï¼ˆé è¨­å…¨é¸å¯æ’ç¨‹é …ç›®ï¼‰
   â”‚   â”œâ”€â”€ èª¿æ•´æ’ç¨‹æ•¸é‡ï¼ˆå¯é¸ï¼‰
   â”‚   â””â”€â”€ é»æ“Š [ç¢ºèªåŠ å…¥]
   â”‚
   â””â”€â”€ æ–¹å¼äºŒï¼šæ‹–æ”¾è¨‚å–®åˆ°å³å´è¡¨æ ¼ â­ æ–°åŠŸèƒ½
       â”œâ”€â”€ æŒ‰ä½è¨‚å–®åˆ—æ‹–æ›³è‡³å³å´è¡¨æ ¼
       â”œâ”€â”€ æ”¾é–‹å¾Œè‡ªå‹•å½ˆå‡ºæ˜ç´°é¸æ“‡è¦–çª—
       â”œâ”€â”€ å‹¾é¸è¦æ’ç¨‹çš„å•†å“
       â””â”€â”€ é»æ“Š [ç¢ºèªåŠ å…¥]

4. å³å´é¡¯ç¤ºå·²é¸çš„æ’ç¨‹é …ç›®
   â”œâ”€â”€ å¯èª¿æ•´æ’ç¨‹æ•¸é‡
   â””â”€â”€ å¯é»æ“Š [-] ç§»é™¤é …ç›®

5. å„²å­˜æ’ç¨‹
   â”œâ”€â”€ å»ºç«‹ ProductionSchedule ä¸»æª”
   â”œâ”€â”€ å»ºç«‹ ProductionScheduleItem é …ç›®
   â””â”€â”€ æ›´æ–° SalesOrderDetail.ScheduledQuantity
```

### ç·¨è¼¯æ’ç¨‹æµç¨‹

```
1. é–‹å•Ÿç”Ÿç”¢æ’ç¨‹ç·¨è¼¯ Modalï¼ˆç·¨è¼¯æ¨¡å¼ï¼‰
   â”œâ”€â”€ è¼‰å…¥æ’ç¨‹ä¸»æª”è³‡è¨Š
   â””â”€â”€ å³å´è¼‰å…¥å·²å­˜åœ¨çš„æ’ç¨‹é …ç›®

2. å¯åŸ·è¡Œçš„æ“ä½œ
   â”œâ”€â”€ ä¿®æ”¹ä¸»æª”è³‡è¨Š
   â”œâ”€â”€ èª¿æ•´ç¾æœ‰é …ç›®çš„æ’ç¨‹æ•¸é‡
   â”œâ”€â”€ å¾å·¦å´åŠ å…¥æ›´å¤šé …ç›®ï¼ˆé»æ“Šæˆ–æ‹–æ”¾ï¼‰
   â””â”€â”€ ç§»é™¤ç¾æœ‰é …ç›®

3. å„²å­˜æ™‚
   â”œâ”€â”€ æ›´æ–°ä¸»æª”
   â”œâ”€â”€ æ›´æ–°/æ–°å¢/åˆªé™¤é …ç›®
   â””â”€â”€ é‡æ–°è¨ˆç®— SalesOrderDetail.ScheduledQuantity
```

---

## çµ„ä»¶è¨­è¨ˆ

### æª”æ¡ˆçµæ§‹

```
Components/Pages/ProductionManagement/
â”œâ”€â”€ ProductionScheduleEditModalComponent.razor    # ä¸»ç·¨è¼¯ Modalï¼ˆæ•´åˆæ‰€æœ‰å­çµ„ä»¶ï¼‰
â”œâ”€â”€ ProductionScheduleOrderTable.razor            # å·¦å´ï¼šå¾…æ’ç¨‹è¨‚å–®è¡¨æ ¼ï¼ˆæ‹–æ›³ä¾†æºï¼‰
â”œâ”€â”€ ProductionScheduleItemTable.razor             # å³å´ï¼šæ’ç¨‹é …ç›®è¡¨æ ¼ï¼ˆæ”¾ç½®ç›®æ¨™ï¼‰
â””â”€â”€ ProductionScheduleDetailSelectorModal.razor   # æ˜ç´°é¸æ“‡å½ˆçª—ï¼ˆä½¿ç”¨é¸å–æ¬„ä½åŠŸèƒ½ï¼‰

Components/Shared/Base/
â””â”€â”€ InteractiveTableComponent.razor               # é€šç”¨è¡¨æ ¼ï¼ˆå«æ‹–æ”¾å’Œé¸å–æ¬„ä½åŠŸèƒ½ï¼‰

Helpers/
â”œâ”€â”€ DragDropState.cs                              # æ‹–æ”¾ç‹€æ…‹ç®¡ç†ï¼ˆéœæ…‹é¡åˆ¥ï¼‰
â””â”€â”€ DragDropEventArgs.cs                          # æ‹–æ”¾äº‹ä»¶åƒæ•¸

wwwroot/js/
â””â”€â”€ drag-drop-helper.js                           # æ‹–æ”¾ JavaScript è¼”åŠ©å‡½æ•¸
```

### çµ„ä»¶è·è²¬

| çµ„ä»¶ | è·è²¬ |
|------|------|
| `ProductionScheduleEditModalComponent` | ä¸»æ§åˆ¶å™¨ï¼Œç®¡ç†ç‹€æ…‹ã€å”èª¿å­çµ„ä»¶ã€è™•ç†å„²å­˜ |
| `ProductionScheduleOrderTable` | é¡¯ç¤ºå¾…æ’ç¨‹è¨‚å–®åˆ—è¡¨ï¼Œæä¾›ç¯©é¸åŠŸèƒ½ï¼Œæ”¯æ´æ‹–æ›³ï¼ˆEnableDragï¼‰ |
| `ProductionScheduleItemTable` | é¡¯ç¤º/ç·¨è¼¯æ’ç¨‹é …ç›®ï¼Œæ”¯æ´æ•¸é‡èª¿æ•´ã€åˆªé™¤å’Œæ‹–æ”¾æ¥æ”¶ï¼ˆEnableDropï¼‰ |
| `ProductionScheduleDetailSelectorModal` | é¡¯ç¤ºè¨‚å–®æ˜ç´°ï¼Œä½¿ç”¨ ShowSelectColumn é€²è¡Œå¤šé¸ï¼ŒBaseModalComponent è™•ç† z-index |

### çµ„ä»¶é€šè¨Š

```
ProductionScheduleEditModalComponent
    â”‚
    â”œâ”€â”€ ProductionScheduleOrderTable
    â”‚       â”‚
    â”‚       â”œâ”€â”€ OnOrderSelected(PendingScheduleOrderDto order)  â”€â”€â†’  é–‹å•Ÿ DetailSelectorModal
    â”‚       â””â”€â”€ OnDragStart(TItem item)  â”€â”€â†’  é–‹å§‹æ‹–æ›³
    â”‚
    â”œâ”€â”€ ProductionScheduleItemTable
    â”‚       â”‚
    â”‚       â”œâ”€â”€ OnOrderDropped(PendingScheduleOrderDto order)  â”€â”€â†’  é–‹å•Ÿ DetailSelectorModal
    â”‚       â”œâ”€â”€ OnItemRemoved(ScheduleItemDto item)  â”€â”€â†’  å¾åˆ—è¡¨ç§»é™¤
    â”‚       â””â”€â”€ OnQuantityChanged(item, newQuantity)  â”€â”€â†’  æ›´æ–°æ•¸é‡
    â”‚
    â””â”€â”€ ProductionScheduleDetailSelectorModal
            â”‚
            â”œâ”€â”€ OnConfirmed(List<PendingScheduleDetailDto> items)  â”€â”€â†’  åŠ å…¥å³å´è¡¨æ ¼
            â””â”€â”€ OnCancelled()  â”€â”€â†’  é—œé–‰å½ˆçª—
```

---

## è³‡æ–™å‚³è¼¸ç‰©ä»¶ (DTO)

### PendingScheduleOrderDtoï¼ˆå¾…æ’ç¨‹è¨‚å–®ï¼‰

```csharp
public class PendingScheduleOrderDto
{
    public int SalesOrderId { get; set; }
    public string OrderCode { get; set; } = "";
    public DateTime OrderDate { get; set; }
    public int? CustomerId { get; set; }
    public string CustomerName { get; set; } = "";
    public int PendingItemCount { get; set; }        // å¾…æ’ç¨‹é …ç›®æ•¸
    public decimal TotalPendingQuantity { get; set; } // å¾…æ’ç¨‹ç¸½æ•¸é‡
}
```

### PendingScheduleDetailDtoï¼ˆå¾…æ’ç¨‹æ˜ç´°ï¼‰

```csharp
public class PendingScheduleDetailDto
{
    public int SalesOrderDetailId { get; set; }
    public int ProductId { get; set; }
    public string ProductCode { get; set; } = "";
    public string ProductName { get; set; } = "";
    public decimal OrderQuantity { get; set; }
    public decimal ScheduledQuantity { get; set; }
    public decimal PendingQuantity { get; set; }      // å¯æ’ç¨‹æ•¸é‡
    public decimal ScheduleQuantity { get; set; }     // æœ¬æ¬¡æ’ç¨‹æ•¸é‡ï¼ˆä½¿ç”¨è€…è¼¸å…¥ï¼‰
    public bool IsSelected { get; set; }              // æ˜¯å¦è¢«é¸å–
}
```

### ScheduleItemDtoï¼ˆæ’ç¨‹é …ç›®ï¼‰

```csharp
public class ScheduleItemDto
{
    public int? Id { get; set; }                    // å¦‚æœæ˜¯ç·¨è¼¯ç¾æœ‰é …ç›®
    public int SalesOrderId { get; set; }           // ä¾†æºè¨‚å–® ID
    public string SalesOrderCode { get; set; } = ""; // ä¾†æºè¨‚å–®ç·¨è™Ÿ
    public int SalesOrderDetailId { get; set; }     // ä¾†æºè¨‚å–®æ˜ç´° ID
    public int ProductId { get; set; }              // å•†å“ ID
    public string ProductCode { get; set; } = "";   // å•†å“ç·¨è™Ÿ
    public string ProductName { get; set; } = "";   // å•†å“åç¨±
    public string CustomerName { get; set; } = "";  // å®¢æˆ¶åç¨±
    public decimal ScheduleQuantity { get; set; }   // æ’ç¨‹æ•¸é‡
    public decimal PendingScheduleQuantity { get; set; } // å‰©é¤˜å¯æ’ç¨‹æ•¸é‡
    public ProductionItemStatus Status { get; set; } // ç‹€æ…‹
    public bool IsNew { get; set; }                 // æ˜¯å¦ç‚ºæ–°é …ç›®
    public bool CanDelete { get; set; }             // æ˜¯å¦å¯åˆªé™¤
}
```

---

## Service éœ€æ±‚

### ISalesOrderServiceï¼ˆéœ€æ–°å¢ï¼‰

```csharp
/// <summary>
/// å–å¾—æœ‰å¾…æ’ç¨‹é …ç›®çš„è¨‚å–®åˆ—è¡¨
/// </summary>
Task<List<SalesOrder>> GetOrdersWithPendingScheduleAsync(int? customerId = null);
```

### ISalesOrderDetailServiceï¼ˆéœ€æ–°å¢ï¼‰

```csharp
/// <summary>
/// å–å¾—æŒ‡å®šè¨‚å–®çš„å¾…æ’ç¨‹æ˜ç´°
/// </summary>
Task<List<SalesOrderDetail>> GetPendingScheduleDetailsByOrderIdAsync(int salesOrderId);

/// <summary>
/// æ›´æ–°æ˜ç´°çš„å·²æ’ç¨‹æ•¸é‡
/// </summary>
Task UpdateScheduledQuantityAsync(int detailId, decimal scheduledQuantity);
```

### IProductionScheduleServiceï¼ˆéœ€æª¢æŸ¥/æ–°å¢ï¼‰

```csharp
/// <summary>
/// å„²å­˜æ’ç¨‹ï¼ˆå«é …ç›®ï¼‰
/// </summary>
Task<ServiceResult<ProductionSchedule>> SaveScheduleWithItemsAsync(
    ProductionSchedule schedule, 
    List<ScheduleItemDto> items);
```

---

## æ¥­å‹™è¦å‰‡

### æ•¸é‡é©—è­‰

1. **æœ¬æ¬¡æ’ç¨‹æ•¸é‡** â‰¤ **å¾…æ’ç¨‹æ•¸é‡**
2. **æœ¬æ¬¡æ’ç¨‹æ•¸é‡** > 0
3. å„²å­˜æ™‚è‡ªå‹•æ›´æ–° `SalesOrderDetail.ScheduledQuantity`

### ç‹€æ…‹æ§åˆ¶

1. è¨‚å–®æ˜ç´° `PendingScheduleQuantity = 0` æ™‚ï¼Œè©²æ˜ç´°ä¸å¯å†æ’ç¨‹
2. è¨‚å–®æ‰€æœ‰æ˜ç´°éƒ½å·²æ’å®Œæ™‚ï¼Œå·¦å´ä¸é¡¯ç¤ºè©²è¨‚å–®
3. æ’ç¨‹é …ç›® `CompletedQuantity > 0` æ™‚ï¼Œè©²é …ç›®ä¸å¯åˆªé™¤ï¼ˆå·²æœ‰ç”Ÿç”¢ç´€éŒ„ï¼‰

### åˆªé™¤/ç§»é™¤è¦å‰‡

1. ç§»é™¤æ’ç¨‹é …ç›®æ™‚ï¼Œéœ€é‚„åŸ `SalesOrderDetail.ScheduledQuantity`
2. åˆªé™¤æ•´å¼µæ’ç¨‹æ™‚ï¼Œéœ€é‚„åŸæ‰€æœ‰ç›¸é—œæ˜ç´°çš„ `ScheduledQuantity`

---

## å¯¦ä½œé †åº

### ç¬¬ä¸€éšæ®µï¼šåŸºç¤æ¶æ§‹ âœ… å·²å®Œæˆ
1. [x] å»ºç«‹ `ProductionScheduleOrderTable.razor`
2. [x] å»ºç«‹ `ProductionScheduleItemTable.razor`
3. [x] å»ºç«‹ `ProductionScheduleDetailSelectorModal.razor`
4. [x] ä¿®æ”¹ `ProductionScheduleEditModalComponent.razor` æ•´åˆçµ„ä»¶

### ç¬¬äºŒéšæ®µï¼šæ‹–æ”¾åŠŸèƒ½ âœ… å·²å®Œæˆ
5. [x] å»ºç«‹ `DragDropState.cs` éœæ…‹ç‹€æ…‹ç®¡ç†
6. [x] å»ºç«‹ `DragDropEventArgs.cs` äº‹ä»¶åƒæ•¸
7. [x] å»ºç«‹ `drag-drop-helper.js` JavaScript è¼”åŠ©å‡½æ•¸
8. [x] ä¿®æ”¹ `InteractiveTableComponent.razor` åŠ å…¥æ‹–æ”¾åƒæ•¸
9. [x] æ•´åˆæ‹–æ”¾åŠŸèƒ½åˆ° OrderTable å’Œ ItemTable

### ç¬¬ä¸‰éšæ®µï¼šé¸å–æ¬„ä½åŠŸèƒ½ âœ… å·²å®Œæˆ
10. [x] ç‚º `InteractiveTableComponent` æ–°å¢ ShowSelectColumn åƒæ•¸
11. [x] å¯¦ä½œå…¨é¸/å…¨ä¸é¸ Checkboxï¼ˆå«åŠé¸ç‹€æ…‹ï¼‰
12. [x] å¯¦ä½œ IsItemSelectable å’Œ UnselectableTemplate
13. [x] é‡æ§‹ `ProductionScheduleDetailSelectorModal` ä½¿ç”¨é¸å–æ¬„ä½åŠŸèƒ½
14. [x] ä½¿ç”¨ `BaseModalComponent` è™•ç† Modal z-indexï¼ˆéœ€è¨­å®š ShowFooter="true"ï¼‰

### ç¬¬å››éšæ®µï¼šService å±¤
15. [ ] æ–°å¢ `GetOrdersWithPendingScheduleAsync` æ–¹æ³•
16. [ ] æ–°å¢ `GetPendingScheduleDetailsByOrderIdAsync` æ–¹æ³•
17. [ ] å¯¦ä½œ `SaveScheduleWithItemsAsync` æ–¹æ³•

### ç¬¬äº”éšæ®µï¼šæ•´åˆæ¸¬è©¦
18. [ ] æ¸¬è©¦æ–°å¢æ’ç¨‹æµç¨‹ï¼ˆé»æ“ŠæŒ‰éˆ•ï¼‰
19. [ ] æ¸¬è©¦æ–°å¢æ’ç¨‹æµç¨‹ï¼ˆæ‹–æ”¾ï¼‰
20. [ ] æ¸¬è©¦ç·¨è¼¯æ’ç¨‹æµç¨‹
21. [ ] æ¸¬è©¦æ•¸é‡è¨ˆç®—æ­£ç¢ºæ€§

---

## å·²çŸ¥å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### å•é¡Œ 1ï¼šBaseModalComponent Footer ä¸é¡¯ç¤º
**åŸå› **ï¼š`BaseModalComponent` é è¨­ `ShowFooter="false"`ï¼Œå°è‡´ `FooterContent` å€å¡Šä¸æœƒæ¸²æŸ“ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼šåœ¨ä½¿ç”¨ `BaseModalComponent` æ™‚ï¼Œè‹¥éœ€è¦é¡¯ç¤º Footerï¼Œå¿…é ˆæ˜ç¢ºè¨­å®š `ShowFooter="true"`ã€‚

```razor
<BaseModalComponent IsVisible="@IsVisible"
                    ShowFooter="true"
                    ...>
    <FooterContent>
        <!-- Footer å…§å®¹ -->
    </FooterContent>
</BaseModalComponent>
```

---

## è®Šæ›´è¨˜éŒ„

| æ—¥æœŸ | è®Šæ›´å…§å®¹ | è² è²¬äºº |
|------|----------|--------|
| 2026-01-26 | åˆç‰ˆè¨­è¨ˆæ–‡æª” | - |
| 2026-01-26 | å¯¦ä½œæ‹–æ”¾åŠŸèƒ½ï¼ˆDragDropStateã€DragDropEventArgsã€drag-drop-helper.jsï¼‰ | - |
| 2026-01-26 | InteractiveTableComponent æ–°å¢ EnableDragã€EnableDropã€DragDropGroupã€TableId ç­‰åƒæ•¸ | - |
| 2026-01-26 | InteractiveTableComponent æ–°å¢ ShowSelectColumnã€IsItemSelectableã€UnselectableTemplate åƒæ•¸ | - |
| 2026-01-26 | é‡æ§‹ ProductionScheduleDetailSelectorModal ä½¿ç”¨ InteractiveTableComponent é¸å–æ¬„ä½åŠŸèƒ½ | - |
| 2026-01-26 | ä¿®æ­£ BaseModalComponent ShowFooter åƒæ•¸ï¼Œç¢ºä¿ Footer æ­£ç¢ºé¡¯ç¤ºç¢ºèªæŒ‰éˆ• | - |
